<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
	<meta name="copyright" content="Copyright 2009 David Singer"/>
	<meta name="author" content="David Singer david@ramaboo.com"/>
	<meta name="description" content=""/>
	<meta name="keywords" content=""/>
	<title>API Documentation for Boo-2.0.x: /var/www/Boo-2.0.0/classes/User.php Source File</title>
	<link rel="stylesheet" href="doxygen.css" type="text/css" media="screen">
	<link rel="stylesheet" href="tabs.css" type="text/css" media="screen">
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_2d402fa29e6cd3b6ca13957b8f90c436.html">var</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_cbe856ff790c9ba5208811309bdf168b.html">www</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_0cb189417002a9d0dd27c92823e85ab7.html">Boo-2.0.0</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_06e5fa5afca5819e2841f23c7a8558e7.html">classes</a>
  </div>
</div>
<div class="contents">
<h1>User.php</h1><a href="_user_8php.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 &lt;?php
<a name="l00002"></a>00002 <span class="comment">/* SVN FILE: $Id: User.php 232 2009-05-04 03:09:46Z david@ramaboo.com $ */</span><span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">/**</span>
<a name="l00004"></a>00004 <span class="comment"> * @brief User class.</span>
<a name="l00005"></a>00005 <span class="comment"> * </span>
<a name="l00006"></a>00006 <span class="comment"> * This class is used to create and manipulate users.</span>
<a name="l00007"></a>00007 <span class="comment"> * </span>
<a name="l00008"></a>00008 <span class="comment"> * @class       Boo_User</span>
<a name="l00009"></a>00009 <span class="comment"> * @license     http://www.gnu.org/licenses/gpl-3.0.txt GNU General Public License</span>
<a name="l00010"></a>00010 <span class="comment"> * @link        http://code.ramaboo.com/ Boo Framework</span>
<a name="l00011"></a>00011 <span class="comment"> * @copyright   2008 David Singer</span>
<a name="l00012"></a>00012 <span class="comment"> * @author      David Singer &lt;david@ramaboo.com&gt;</span>
<a name="l00013"></a>00013 <span class="comment"> * @version     1.9.5</span>
<a name="l00014"></a>00014 <span class="comment"> */</span>
<a name="l00015"></a>00015 
<a name="l00016"></a><a class="code" href="class_boo___user.html">00016</a> <span class="keyword">class </span><a class="code" href="class_boo___user.html" title="User class.">Boo_User</a> <span class="keyword">extends</span> <a class="code" href="class_boo___io.html" title="IO class.">Boo_Io</a> {
<a name="l00017"></a>00017     <span class="comment"></span>
<a name="l00018"></a>00018 <span class="comment">    /**</span>
<a name="l00019"></a>00019 <span class="comment">     * @brief Table name.</span>
<a name="l00020"></a>00020 <span class="comment">     * </span>
<a name="l00021"></a>00021 <span class="comment">     * Used for static functions.</span>
<a name="l00022"></a>00022 <span class="comment">     * For non static functions see Boo_Db::setTableName().</span>
<a name="l00023"></a>00023 <span class="comment">     */</span>
<a name="l00024"></a><a class="code" href="class_boo___user.html#ae6022cd74927e3675f5864416fb91bf8">00024</a>     <span class="keyword">const</span> <a class="code" href="class_boo___user.html#ae6022cd74927e3675f5864416fb91bf8" title="Table name.">TABLE_NAME</a> = <span class="stringliteral">&apos;boo_users&apos;</span>;
<a name="l00025"></a>00025     <span class="comment"></span>
<a name="l00026"></a>00026 <span class="comment">    /**</span>
<a name="l00027"></a>00027 <span class="comment">     * @brief Primary key.</span>
<a name="l00028"></a>00028 <span class="comment">     * </span>
<a name="l00029"></a>00029 <span class="comment">     * Used for static functions.</span>
<a name="l00030"></a>00030 <span class="comment">     * For non static functions see Boo_Db::setPrimaryKey().</span>
<a name="l00031"></a>00031 <span class="comment">     */</span>
<a name="l00032"></a><a class="code" href="class_boo___user.html#aab9f630ebc1538bb13ba61048633de10">00032</a>     <span class="keyword">const</span> <a class="code" href="class_boo___user.html#aab9f630ebc1538bb13ba61048633de10" title="Primary key.">PRIMARY_KEY</a> = <span class="stringliteral">&apos;user_id&apos;</span>;
<a name="l00033"></a>00033     <span class="comment"></span>
<a name="l00034"></a>00034 <span class="comment">    /**</span>
<a name="l00035"></a>00035 <span class="comment">     * @brief Maximum length of username.</span>
<a name="l00036"></a>00036 <span class="comment">     */</span>
<a name="l00037"></a><a class="code" href="class_boo___user.html#aeab3025e56e2404543f0c7b6f6d0cf34">00037</a>     <span class="keyword">const</span> <a class="code" href="class_boo___user.html#aeab3025e56e2404543f0c7b6f6d0cf34" title="Maximum length of username.">MAX_USERNAME_LENGTH</a> = 32;
<a name="l00038"></a>00038     <span class="comment"></span>
<a name="l00039"></a>00039 <span class="comment">    /**</span>
<a name="l00040"></a>00040 <span class="comment">     * @brief Minimum length of username.</span>
<a name="l00041"></a>00041 <span class="comment">     */</span>
<a name="l00042"></a><a class="code" href="class_boo___user.html#a7b19fecbcff70d2272d9247d2b558094">00042</a>     <span class="keyword">const</span> <a class="code" href="class_boo___user.html#a7b19fecbcff70d2272d9247d2b558094" title="Minimum length of username.">MIN_USERNAME_LENGTH</a> = 4;
<a name="l00043"></a>00043     
<a name="l00044"></a>00044     <span class="comment"></span>
<a name="l00045"></a>00045 <span class="comment">    /**</span>
<a name="l00046"></a>00046 <span class="comment">     * @brief Default constructor.</span>
<a name="l00047"></a>00047 <span class="comment">     * </span>
<a name="l00048"></a>00048 <span class="comment">     * @param int $user[optional] User to open.</span>
<a name="l00049"></a>00049 <span class="comment">     * @return void.</span>
<a name="l00050"></a>00050 <span class="comment">     */</span>
<a name="l00051"></a><a class="code" href="class_boo___user.html#ae4f5f3d743d36366898b8967a9365a00">00051</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#ae4f5f3d743d36366898b8967a9365a00" title="Default constructor.">__construct</a>(<a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = <span class="keyword">false</span>) {
<a name="l00052"></a>00052         <a class="code" href="class_boo___user.html#ae4f5f3d743d36366898b8967a9365a00" title="Default constructor.">parent::__construct</a>(self::TABLE_NAME, self::PRIMARY_KEY);
<a name="l00053"></a>00053         
<a name="l00054"></a>00054         <span class="comment">// defaults</span>
<a name="l00055"></a>00055         $this-&gt;<a class="code" href="class_boo___io.html#a762a22c5f6341c144fa400e42cf00cb3" title="Adds a field to the ignored list.">setIgnoredField</a>(<span class="stringliteral">&apos;password&apos;</span>);
<a name="l00056"></a>00056         $this-&gt;<a class="code" href="class_boo___io.html#af6e5dfc5c566c530a70f9a76bd063870" title="Sets the list of magic fields.">setMagicFields</a>(array(<span class="stringliteral">&apos;created&apos;</span>, <span class="stringliteral">&apos;modified&apos;</span>, <span class="stringliteral">&apos;ip&apos;</span>));
<a name="l00057"></a>00057         $this-&gt;<a class="code" href="class_boo___io.html#ad7c36e69b1c4d3729059687c9e3dff31" title="Adds a field to the serialized list.">setSerializedField</a>(<span class="stringliteral">&apos;settings&apos;</span>);
<a name="l00058"></a>00058         $this-&gt;<a class="code" href="class_boo___user.html#acf3218cb6467b60d7e0a24ad18ce7dbb" title="Set users status.">setStatus</a>(BOO_STATUS_OK);
<a name="l00059"></a>00059         $this-&gt;<a class="code" href="class_boo___user.html#a6072056de7f719e63dd532116ad7ddfb" title="Sets the users group ID.">setGroupId</a>(BOO_GROUP_USER);
<a name="l00060"></a>00060         $this-&gt;<a class="code" href="class_boo___user.html#abd7d0470663ea9b429af76ca7b53780c" title="Sets the users country code.">setCountryCode</a>(<span class="stringliteral">&apos;US&apos;</span>);
<a name="l00061"></a>00061         
<a name="l00062"></a>00062         <span class="keywordflow">if</span> (<a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> !== <span class="keyword">false</span>) {
<a name="l00063"></a>00063             $this-&gt;<a class="code" href="class_boo___user.html#a499b83ce885480d6b8cb2fcfb7f9c9dd" title="Opens the user object.">open</a>(<a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>);
<a name="l00064"></a>00064         }
<a name="l00065"></a>00065     }
<a name="l00066"></a>00066     
<a name="l00067"></a>00067     
<a name="l00068"></a><a class="code" href="class_boo___user.html#a8a01a8288d3c103a46cae48dccb834bc">00068</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a8a01a8288d3c103a46cae48dccb834bc">hasAccount</a>() {
<a name="l00069"></a>00069         <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) $this-&gt;<a class="code" href="class_boo___user.html#a06400cc7727c91ce88e892abfc6655c2" title="Gets the users account ID.">getAccountId</a>();
<a name="l00070"></a>00070     }
<a name="l00071"></a>00071     
<a name="l00072"></a><a class="code" href="class_boo___user.html#a9e881e933b02b961ec6d77f1264b53bd">00072</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a9e881e933b02b961ec6d77f1264b53bd">openAccount</a>($accountId = <span class="keyword">false</span>) {
<a name="l00073"></a>00073         
<a name="l00074"></a>00074         
<a name="l00075"></a>00075         <span class="keywordflow">if</span> ($accountId === <span class="keyword">false</span>) {
<a name="l00076"></a>00076             $accountId = $this-&gt;<a class="code" href="class_boo___user.html#a06400cc7727c91ce88e892abfc6655c2" title="Gets the users account ID.">getAccountId</a>();
<a name="l00077"></a>00077         }
<a name="l00078"></a>00078         
<a name="l00079"></a>00079         <span class="keywordflow">if</span> ($accountId === <span class="keyword">false</span>) {
<a name="l00080"></a>00080             trigger_error(<span class="stringliteral">&apos;Account ID is false, user does not have an account&apos;</span>, E_USER_NOTICE);
<a name="l00081"></a>00081             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00082"></a>00082         }
<a name="l00083"></a>00083         <span class="keywordflow">if</span> (class_exists(<span class="stringliteral">&apos;Account&apos;</span>, <span class="keyword">false</span>) &amp;&amp; BOO_CLASS) {
<a name="l00084"></a>00084             $this-&gt;account = <span class="keyword">new</span> Account;
<a name="l00085"></a>00085         } <span class="keywordflow">else</span> {
<a name="l00086"></a>00086             $this-&gt;account = <span class="keyword">new</span> Boo_Account;
<a name="l00087"></a>00087         }
<a name="l00088"></a>00088         $result = $this-&gt;account-&gt;open($accountId);
<a name="l00089"></a>00089         
<a name="l00090"></a>00090         <span class="keywordflow">return</span> $result;
<a name="l00091"></a>00091     }
<a name="l00092"></a>00092     <span class="comment"></span>
<a name="l00093"></a>00093 <span class="comment">    /**</span>
<a name="l00094"></a>00094 <span class="comment">     * @brief Sets the users group ID.</span>
<a name="l00095"></a>00095 <span class="comment">     * </span>
<a name="l00096"></a>00096 <span class="comment">     * @param int $groupId The group ID.</span>
<a name="l00097"></a>00097 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00098"></a>00098 <span class="comment">     */</span>
<a name="l00099"></a><a class="code" href="class_boo___user.html#a6072056de7f719e63dd532116ad7ddfb">00099</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a6072056de7f719e63dd532116ad7ddfb" title="Sets the users group ID.">setGroupId</a>($groupId) {
<a name="l00100"></a>00100         $groupId = (int) $groupId;
<a name="l00101"></a>00101         
<a name="l00102"></a>00102         <span class="keywordflow">if</span> (<a class="code" href="class_boo___group.html#a43cf663e912bc345fdb437b77fd6b52c" title="Determines if a group ID already exists.">Boo_Group::isGroupId</a>($groupId)) {
<a name="l00103"></a>00103             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;group_id&apos;</span>, $groupId);
<a name="l00104"></a>00104         } <span class="keywordflow">else</span> {
<a name="l00105"></a>00105             trigger_error(<span class="stringliteral">&quot;Group ID {$groupId} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00106"></a>00106             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00107"></a>00107         }
<a name="l00108"></a>00108     }
<a name="l00109"></a>00109     <span class="comment"></span>
<a name="l00110"></a>00110 <span class="comment">    /**</span>
<a name="l00111"></a>00111 <span class="comment">     * @brief Gets the users group ID.</span>
<a name="l00112"></a>00112 <span class="comment">     * </span>
<a name="l00113"></a>00113 <span class="comment">     * @return int Returns the users group ID if set, FALSE otherwise.</span>
<a name="l00114"></a>00114 <span class="comment">     */</span>
<a name="l00115"></a><a class="code" href="class_boo___user.html#ab7b2b90d422ae4c362f7a5f22750e38e">00115</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#ab7b2b90d422ae4c362f7a5f22750e38e" title="Gets the users group ID.">getGroupId</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;group_id&apos;</span>); }
<a name="l00116"></a>00116     <span class="comment"></span>
<a name="l00117"></a>00117 <span class="comment">    /**</span>
<a name="l00118"></a>00118 <span class="comment">     * @brief Sets the users account ID.</span>
<a name="l00119"></a>00119 <span class="comment">     * </span>
<a name="l00120"></a>00120 <span class="comment">     * @param int $accountId The account id.</span>
<a name="l00121"></a>00121 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00122"></a>00122 <span class="comment">     */</span>
<a name="l00123"></a><a class="code" href="class_boo___user.html#af573ccc19102493c95b7a3d372202869">00123</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#af573ccc19102493c95b7a3d372202869" title="Sets the users account ID.">setAccountId</a>($accountId) {
<a name="l00124"></a>00124         $accountId = (int) $accountId;
<a name="l00125"></a>00125         
<a name="l00126"></a>00126         <span class="keywordflow">if</span> (Boo_Account::isAccountId($accountId)) {
<a name="l00127"></a>00127             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;account_id&apos;</span>, $accountId);
<a name="l00128"></a>00128         } <span class="keywordflow">else</span> {
<a name="l00129"></a>00129             trigger_error(<span class="stringliteral">&quot;Account ID {$accountId} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00130"></a>00130             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00131"></a>00131         }
<a name="l00132"></a>00132     }
<a name="l00133"></a>00133     <span class="comment"></span>
<a name="l00134"></a>00134 <span class="comment">    /**</span>
<a name="l00135"></a>00135 <span class="comment">     * @brief Gets the users account ID.</span>
<a name="l00136"></a>00136 <span class="comment">     * </span>
<a name="l00137"></a>00137 <span class="comment">     * @return int Returns the users account ID if set, FALSE otherwise.</span>
<a name="l00138"></a>00138 <span class="comment">     */</span>
<a name="l00139"></a><a class="code" href="class_boo___user.html#a06400cc7727c91ce88e892abfc6655c2">00139</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a06400cc7727c91ce88e892abfc6655c2" title="Gets the users account ID.">getAccountId</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;account_id&apos;</span>); }
<a name="l00140"></a>00140     <span class="comment"></span>
<a name="l00141"></a>00141 <span class="comment">    /**</span>
<a name="l00142"></a>00142 <span class="comment">     * @brief Set users status.</span>
<a name="l00143"></a>00143 <span class="comment">     * </span>
<a name="l00144"></a>00144 <span class="comment">     * Possible values are:</span>
<a name="l00145"></a>00145 <span class="comment">     * \li \c BOO_STATUS_OK</span>
<a name="l00146"></a>00146 <span class="comment">     * \li \c BOO_STATUS_CLOSED</span>
<a name="l00147"></a>00147 <span class="comment">     * \li \c BOO_STATUS_SUSPENDED</span>
<a name="l00148"></a>00148 <span class="comment">     * \li \c BOO_STATUS_DISABLED</span>
<a name="l00149"></a>00149 <span class="comment">     * \li \c BOO_STATUS_PENDING</span>
<a name="l00150"></a>00150 <span class="comment">     * \li \c BOO_STATUS_UNKNOWN</span>
<a name="l00151"></a>00151 <span class="comment">     * </span>
<a name="l00152"></a>00152 <span class="comment">     * You may use other integer values of your own. Statuses that indicate</span>
<a name="l00153"></a>00153 <span class="comment">     * a user is in good standing (and allowed to login) should be greater than or equal to 1. Statuses </span>
<a name="l00154"></a>00154 <span class="comment">     * that indicate a users account is closed, suspended, or otherwise inaccesable (and not allowed to login) be less</span>
<a name="l00155"></a>00155 <span class="comment">     * than or equal to 0.</span>
<a name="l00156"></a>00156 <span class="comment">     * </span>
<a name="l00157"></a>00157 <span class="comment">     * @param int $status User status.</span>
<a name="l00158"></a>00158 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00159"></a>00159 <span class="comment">     */</span>
<a name="l00160"></a><a class="code" href="class_boo___user.html#acf3218cb6467b60d7e0a24ad18ce7dbb">00160</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#acf3218cb6467b60d7e0a24ad18ce7dbb" title="Set users status.">setStatus</a>($status) {
<a name="l00161"></a>00161         $status = (int) $status;
<a name="l00162"></a>00162         <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;status&apos;</span>, $status);
<a name="l00163"></a>00163     }
<a name="l00164"></a>00164     <span class="comment"></span>
<a name="l00165"></a>00165 <span class="comment">    /**</span>
<a name="l00166"></a>00166 <span class="comment">     * @brief Gets the users status.</span>
<a name="l00167"></a>00167 <span class="comment">     * @return int The users status, FALSE on failure.</span>
<a name="l00168"></a>00168 <span class="comment">     */</span>
<a name="l00169"></a><a class="code" href="class_boo___user.html#abf69c58ef2348a5ae36c24f360fbfa50">00169</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#abf69c58ef2348a5ae36c24f360fbfa50" title="Gets the users status.">getStatus</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;status&apos;</span>); }
<a name="l00170"></a>00170     <span class="comment"></span>
<a name="l00171"></a>00171 <span class="comment">    /**</span>
<a name="l00172"></a>00172 <span class="comment">     * @breif Determins if a users status is OK.</span>
<a name="l00173"></a>00173 <span class="comment">     * @return bool Returns TRUE if user is OK, FALSE otherwise.</span>
<a name="l00174"></a>00174 <span class="comment">     * @warning This function will return TRUE for any positive status not just \c BOO_STATUS_OK.</span>
<a name="l00175"></a>00175 <span class="comment">     */</span>
<a name="l00176"></a><a class="code" href="class_boo___user.html#a6b51673d1edd83329a9295d7752b8a67">00176</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a6b51673d1edd83329a9295d7752b8a67">isStatusOK</a>() { <span class="keywordflow">return</span> ($this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;status&apos;</span>) &gt;= 1); }
<a name="l00177"></a>00177     <span class="comment"></span>
<a name="l00178"></a>00178 <span class="comment">    /**</span>
<a name="l00179"></a>00179 <span class="comment">     * @brief Sets users private status.</span>
<a name="l00180"></a>00180 <span class="comment">     * </span>
<a name="l00181"></a>00181 <span class="comment">     * @param bool $opt Private status.</span>
<a name="l00182"></a>00182 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00183"></a>00183 <span class="comment">     */</span>
<a name="l00184"></a><a class="code" href="class_boo___user.html#ae96c7d53e793a4753d22bab88c53d314">00184</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#ae96c7d53e793a4753d22bab88c53d314" title="Sets users private status.">setPrivate</a>($opt) {
<a name="l00185"></a>00185         $private = (bool) $private;
<a name="l00186"></a>00186         <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;private&apos;</span>, $opt);
<a name="l00187"></a>00187     }
<a name="l00188"></a>00188     <span class="comment"></span>
<a name="l00189"></a>00189 <span class="comment">    /**</span>
<a name="l00190"></a>00190 <span class="comment">     * @brief Determins if a users profile is private.</span>
<a name="l00191"></a>00191 <span class="comment">     * </span>
<a name="l00192"></a>00192 <span class="comment">     * @return bool Returns TRUE if private, FALSE otherwise.</span>
<a name="l00193"></a>00193 <span class="comment">     */</span>
<a name="l00194"></a><a class="code" href="class_boo___user.html#a4ca78d89d4b02c5152f4ce74b26784a1">00194</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a4ca78d89d4b02c5152f4ce74b26784a1" title="Determins if a users profile is private.">isPrivate</a>() { <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;private&apos;</span>); }
<a name="l00195"></a>00195     <span class="comment"></span>
<a name="l00196"></a>00196 <span class="comment">    /**</span>
<a name="l00197"></a>00197 <span class="comment">     * @brief Sets the users website.</span>
<a name="l00198"></a>00198 <span class="comment">     * </span>
<a name="l00199"></a>00199 <span class="comment">     * @param string $website The website.</span>
<a name="l00200"></a>00200 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00201"></a>00201 <span class="comment">     */</span>
<a name="l00202"></a><a class="code" href="class_boo___user.html#adb20a504435dbdfa4e47e85cb63832f8">00202</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#adb20a504435dbdfa4e47e85cb63832f8" title="Sets the users website.">setWebsite</a>($website) {
<a name="l00203"></a>00203         $website = Boo_Format::formatURL($website);
<a name="l00204"></a>00204         
<a name="l00205"></a>00205         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#ae1807cf7b7006c38a8106dc13fd9608e" title="Determins if a URL is valid.">Boo_Validator::isUrl</a>($website)) {
<a name="l00206"></a>00206             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;website&apos;</span>, $website);
<a name="l00207"></a>00207         } <span class="keywordflow">else</span> {
<a name="l00208"></a>00208             trigger_error(<span class="stringliteral">&quot;Website {$website} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00209"></a>00209             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00210"></a>00210         }
<a name="l00211"></a>00211     }
<a name="l00212"></a>00212     <span class="comment"></span>
<a name="l00213"></a>00213 <span class="comment">    /**</span>
<a name="l00214"></a>00214 <span class="comment">     * @brief Gets the users website.</span>
<a name="l00215"></a>00215 <span class="comment">     * </span>
<a name="l00216"></a>00216 <span class="comment">     * @return string Returns the users website if set, FALSE otherwise.</span>
<a name="l00217"></a>00217 <span class="comment">     */</span>
<a name="l00218"></a><a class="code" href="class_boo___user.html#ae3f8b0815d09020287b63d5a46be79e7">00218</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#ae3f8b0815d09020287b63d5a46be79e7" title="Gets the users website.">getWebsite</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;website&apos;</span>); }
<a name="l00219"></a>00219     <span class="comment"></span>
<a name="l00220"></a>00220 <span class="comment">    /**</span>
<a name="l00221"></a>00221 <span class="comment">     * @brief Gets the users website as a HTML anchor.</span>
<a name="l00222"></a>00222 <span class="comment">     * </span>
<a name="l00223"></a>00223 <span class="comment">     * @param array $attrs[optional] Array of attributes.</span>
<a name="l00224"></a>00224 <span class="comment">     * @return Boo_Html The users link as a HTML anchor, FALSE on failure.</span>
<a name="l00225"></a>00225 <span class="comment">     */</span>
<a name="l00226"></a><a class="code" href="class_boo___user.html#a07544c4493932fbf3ff75df70baa2d9b">00226</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a07544c4493932fbf3ff75df70baa2d9b" title="Gets the users website as a HTML anchor.">htmlWebsiteA</a>(array $attrs = array()) {
<a name="l00227"></a>00227         $website = $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;website&apos;</span>);
<a name="l00228"></a>00228 
<a name="l00229"></a>00229         <span class="keywordflow">if</span> ($website) {
<a name="l00230"></a>00230             $a = <span class="keyword">new</span> <a class="code" href="class_boo___html___a.html" title="HTML anchor class.">Boo_Html_A</a>;
<a name="l00231"></a>00231             $a-&gt;applyAttrs($attrs);
<a name="l00232"></a>00232             
<a name="l00233"></a>00233             $a-&gt;setAttr(<span class="stringliteral">&apos;href&apos;</span>, Boo_Format::formatURL($website));
<a name="l00234"></a>00234             $a-&gt;setContent($website);
<a name="l00235"></a>00235             
<a name="l00236"></a>00236             <span class="keywordflow">return</span> $a;
<a name="l00237"></a>00237             
<a name="l00238"></a>00238         } <span class="keywordflow">else</span> {
<a name="l00239"></a>00239             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00240"></a>00240         }
<a name="l00241"></a>00241     }
<a name="l00242"></a>00242     
<a name="l00243"></a>00243     <span class="comment"></span>
<a name="l00244"></a>00244 <span class="comment">    /**</span>
<a name="l00245"></a>00245 <span class="comment">     * @brief Sets the users first name.</span>
<a name="l00246"></a>00246 <span class="comment">     * </span>
<a name="l00247"></a>00247 <span class="comment">     * @param string $name The first name.</span>
<a name="l00248"></a>00248 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00249"></a>00249 <span class="comment">     */</span>
<a name="l00250"></a><a class="code" href="class_boo___user.html#a8caab461957b48820035417ff2be0e51">00250</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a8caab461957b48820035417ff2be0e51" title="Sets the users first name.">setFirstName</a>($name) {
<a name="l00251"></a>00251         $name = <a class="code" href="functions_2core_8php.html#af24e36b758a9f06e154b76b3b1ed0c8d" title="Formats string for insertion into database.">strtodb</a>($name);
<a name="l00252"></a>00252         
<a name="l00253"></a>00253         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#a3c62b25ae277d4a9c2a36389cdd67655" title="Determins if a value is a name or not.">Boo_Validator::isName</a>($name)) {
<a name="l00254"></a>00254             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;first_name&apos;</span>, $name);
<a name="l00255"></a>00255         } <span class="keywordflow">else</span> {
<a name="l00256"></a>00256             trigger_error(<span class="stringliteral">&quot;First name {$name} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00257"></a>00257             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00258"></a>00258         }
<a name="l00259"></a>00259     }
<a name="l00260"></a>00260     <span class="comment"></span>
<a name="l00261"></a>00261 <span class="comment">    /**</span>
<a name="l00262"></a>00262 <span class="comment">     * @brief Gets the users first name.</span>
<a name="l00263"></a>00263 <span class="comment">     * </span>
<a name="l00264"></a>00264 <span class="comment">     * @return string Returns the users first name if set, FALSE otherwise.</span>
<a name="l00265"></a>00265 <span class="comment">     */</span>
<a name="l00266"></a><a class="code" href="class_boo___user.html#ae9f6859f9ee17ae6caeb3044319e550b">00266</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#ae9f6859f9ee17ae6caeb3044319e550b" title="Gets the users first name.">getFirstName</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;first_name&apos;</span>); }
<a name="l00267"></a>00267     <span class="comment"></span>
<a name="l00268"></a>00268 <span class="comment">    /**</span>
<a name="l00269"></a>00269 <span class="comment">     * @brief Sets the users last name.</span>
<a name="l00270"></a>00270 <span class="comment">     * </span>
<a name="l00271"></a>00271 <span class="comment">     * @param string $name The last name.</span>
<a name="l00272"></a>00272 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00273"></a>00273 <span class="comment">     */</span>
<a name="l00274"></a><a class="code" href="class_boo___user.html#a8b44cffc6ec7b7af3feb6ac576133ee8">00274</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a8b44cffc6ec7b7af3feb6ac576133ee8" title="Sets the users last name.">setLastName</a>($name) {
<a name="l00275"></a>00275         $name = <a class="code" href="functions_2core_8php.html#af24e36b758a9f06e154b76b3b1ed0c8d" title="Formats string for insertion into database.">strtodb</a>($name);
<a name="l00276"></a>00276         
<a name="l00277"></a>00277         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#a3c62b25ae277d4a9c2a36389cdd67655" title="Determins if a value is a name or not.">Boo_Validator::isName</a>($name)) {
<a name="l00278"></a>00278             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;last_name&apos;</span>, $name);
<a name="l00279"></a>00279         } <span class="keywordflow">else</span> {
<a name="l00280"></a>00280             trigger_error(<span class="stringliteral">&quot;Last name {$name} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00281"></a>00281             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00282"></a>00282         }
<a name="l00283"></a>00283     }
<a name="l00284"></a>00284     <span class="comment"></span>
<a name="l00285"></a>00285 <span class="comment">    /**</span>
<a name="l00286"></a>00286 <span class="comment">     * @brief Gets the users last name.</span>
<a name="l00287"></a>00287 <span class="comment">     * </span>
<a name="l00288"></a>00288 <span class="comment">     * @return string Returns the users last name if set, FALSE otherwise.</span>
<a name="l00289"></a>00289 <span class="comment">     */</span>
<a name="l00290"></a><a class="code" href="class_boo___user.html#a02cf0e6079cbe428cd6edd1ed7308340">00290</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a02cf0e6079cbe428cd6edd1ed7308340" title="Gets the users last name.">getLastName</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;last_name&apos;</span>); }
<a name="l00291"></a>00291     <span class="comment"></span>
<a name="l00292"></a>00292 <span class="comment">    /**</span>
<a name="l00293"></a>00293 <span class="comment">     * @brief Gets the users name.</span>
<a name="l00294"></a>00294 <span class="comment">     * </span>
<a name="l00295"></a>00295 <span class="comment">     * Formated as first name space last name if both are present, otherwise just the</span>
<a name="l00296"></a>00296 <span class="comment">     * name that is set.</span>
<a name="l00297"></a>00297 <span class="comment">     * </span>
<a name="l00298"></a>00298 <span class="comment">     * @return string Returns the users name if set, FALSE otherwise.</span>
<a name="l00299"></a>00299 <span class="comment">     */</span>
<a name="l00300"></a><a class="code" href="class_boo___user.html#ac1537e5aaea442a1b0956f87e9923cf3">00300</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#ac1537e5aaea442a1b0956f87e9923cf3" title="Gets the users name.">getName</a>() {
<a name="l00301"></a>00301         $name = trim($this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;first_name&apos;</span>) . <span class="charliteral">&apos; &apos;</span> . $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;last_name&apos;</span>)); <span class="comment">// removes extra spaces</span>
<a name="l00302"></a>00302         <span class="keywordflow">if</span> ($name) {
<a name="l00303"></a>00303             <span class="keywordflow">return</span> $name;
<a name="l00304"></a>00304         } <span class="keywordflow">else</span> {
<a name="l00305"></a>00305             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00306"></a>00306         }
<a name="l00307"></a>00307     }
<a name="l00308"></a>00308     <span class="comment"></span>
<a name="l00309"></a>00309 <span class="comment">    /**</span>
<a name="l00310"></a>00310 <span class="comment">     * @brief Sets the users company.</span>
<a name="l00311"></a>00311 <span class="comment">     * </span>
<a name="l00312"></a>00312 <span class="comment">     * @param string $company The company.</span>
<a name="l00313"></a>00313 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00314"></a>00314 <span class="comment">     */</span>
<a name="l00315"></a><a class="code" href="class_boo___user.html#a592b000815c92ccd96bd55fa34c04697">00315</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a592b000815c92ccd96bd55fa34c04697" title="Sets the users company.">setCompany</a>($company) {
<a name="l00316"></a>00316         $company = <a class="code" href="functions_2core_8php.html#af24e36b758a9f06e154b76b3b1ed0c8d" title="Formats string for insertion into database.">strtodb</a>($company);
<a name="l00317"></a>00317         
<a name="l00318"></a>00318         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#abd996a1b6f2e4c7d07e5c8b2eef28f51" title="Determins if a value is a string or not.">Boo_Validator::isString</a>($company, 2, 32)) {
<a name="l00319"></a>00319             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;company&apos;</span>, $company);
<a name="l00320"></a>00320         } <span class="keywordflow">else</span> {
<a name="l00321"></a>00321             trigger_error(<span class="stringliteral">&quot;Company {$company} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00322"></a>00322             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00323"></a>00323         }
<a name="l00324"></a>00324     }
<a name="l00325"></a>00325     <span class="comment"></span>
<a name="l00326"></a>00326 <span class="comment">    /**</span>
<a name="l00327"></a>00327 <span class="comment">     * @brief Gets the users company.</span>
<a name="l00328"></a>00328 <span class="comment">     * </span>
<a name="l00329"></a>00329 <span class="comment">     * @return string Returns the users company if set, FALSE otherwise.</span>
<a name="l00330"></a>00330 <span class="comment">     */</span>
<a name="l00331"></a><a class="code" href="class_boo___user.html#a97d9e018354f6f25efbf4c4fc0e22c01">00331</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a97d9e018354f6f25efbf4c4fc0e22c01" title="Gets the users company.">getCompany</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;company&apos;</span>); }
<a name="l00332"></a>00332     <span class="comment"></span>
<a name="l00333"></a>00333 <span class="comment">    /**</span>
<a name="l00334"></a>00334 <span class="comment">     * @brief Sets the users street.</span>
<a name="l00335"></a>00335 <span class="comment">     * </span>
<a name="l00336"></a>00336 <span class="comment">     * @param string $street The street.</span>
<a name="l00337"></a>00337 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00338"></a>00338 <span class="comment">     */</span>
<a name="l00339"></a><a class="code" href="class_boo___user.html#ae10c3b8189fddd6a4f4908a0b5cf8bda">00339</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#ae10c3b8189fddd6a4f4908a0b5cf8bda" title="Sets the users street.">setStreet</a>($street) {
<a name="l00340"></a>00340         $street = <a class="code" href="functions_2core_8php.html#af24e36b758a9f06e154b76b3b1ed0c8d" title="Formats string for insertion into database.">strtodb</a>($street);
<a name="l00341"></a>00341         
<a name="l00342"></a>00342         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#ab78a80ea69f317c8a60585d1e9f8b85a" title="Determins if a value is a street or not.">Boo_Validator::isStreet</a>($street)) {
<a name="l00343"></a>00343             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;street&apos;</span>, $street);
<a name="l00344"></a>00344         } <span class="keywordflow">else</span> {
<a name="l00345"></a>00345             trigger_error(<span class="stringliteral">&quot;Street {$street} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00346"></a>00346             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00347"></a>00347         }
<a name="l00348"></a>00348     }
<a name="l00349"></a>00349     <span class="comment"></span>
<a name="l00350"></a>00350 <span class="comment">    /**</span>
<a name="l00351"></a>00351 <span class="comment">     * @brief Gets the users street.</span>
<a name="l00352"></a>00352 <span class="comment">     * </span>
<a name="l00353"></a>00353 <span class="comment">     * @return string Returns the users street if set, FALSE otherwise.</span>
<a name="l00354"></a>00354 <span class="comment">     */</span>
<a name="l00355"></a><a class="code" href="class_boo___user.html#ad8c0699621dcb97a0505716ea96dbc1f">00355</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#ad8c0699621dcb97a0505716ea96dbc1f" title="Gets the users street.">getStreet</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;street&apos;</span>); }
<a name="l00356"></a>00356     <span class="comment"></span>
<a name="l00357"></a>00357 <span class="comment">    /**</span>
<a name="l00358"></a>00358 <span class="comment">     * @brief Sets the users apartment number.</span>
<a name="l00359"></a>00359 <span class="comment">     * </span>
<a name="l00360"></a>00360 <span class="comment">     * @param string $apt The apartment number.</span>
<a name="l00361"></a>00361 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00362"></a>00362 <span class="comment">     */</span>
<a name="l00363"></a><a class="code" href="class_boo___user.html#a61a25dce88a61009807dafda7714735d">00363</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a61a25dce88a61009807dafda7714735d" title="Sets the users apartment number.">setApartmentNumber</a>($apt) {
<a name="l00364"></a>00364         $apt = <a class="code" href="functions_2core_8php.html#af24e36b758a9f06e154b76b3b1ed0c8d" title="Formats string for insertion into database.">strtodb</a>($apt);
<a name="l00365"></a>00365         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#a3fa115fd0eba15bbd0a4e33ed60b30c6" title="Determins if a value is an apartment number or not.">Boo_Validator::isApartmentNumber</a>($apt)) {
<a name="l00366"></a>00366             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;apartment_number&apos;</span>, $apt);
<a name="l00367"></a>00367         } <span class="keywordflow">else</span> {
<a name="l00368"></a>00368             trigger_error(<span class="stringliteral">&quot;Apartment number {$apt} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00369"></a>00369             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00370"></a>00370         }
<a name="l00371"></a>00371     }
<a name="l00372"></a>00372     <span class="comment"></span>
<a name="l00373"></a>00373 <span class="comment">    /**</span>
<a name="l00374"></a>00374 <span class="comment">     * @brief Gets the users apartment number.</span>
<a name="l00375"></a>00375 <span class="comment">     * </span>
<a name="l00376"></a>00376 <span class="comment">     * @return string Returns the users apartment number if set, FALSE otherwise.</span>
<a name="l00377"></a>00377 <span class="comment">     */</span>
<a name="l00378"></a><a class="code" href="class_boo___user.html#a4221e62d4fe256e8468a809e0e27a358">00378</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a4221e62d4fe256e8468a809e0e27a358" title="Gets the users apartment number.">getApartmentNumber</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;apartment_number&apos;</span>); }
<a name="l00379"></a>00379     <span class="comment"></span>
<a name="l00380"></a>00380 <span class="comment">    /**</span>
<a name="l00381"></a>00381 <span class="comment">     * @brief Determins if user has an apartment number.</span>
<a name="l00382"></a>00382 <span class="comment">     * </span>
<a name="l00383"></a>00383 <span class="comment">     * @attention Zero is a valid apartment number.</span>
<a name="l00384"></a>00384 <span class="comment">     * @return bool Returns TRUE if apartment number is present, FALSE otherwise.</span>
<a name="l00385"></a>00385 <span class="comment">     */</span>
<a name="l00386"></a><a class="code" href="class_boo___user.html#a5af348305e84921fcb7055a4e3a2905a">00386</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a5af348305e84921fcb7055a4e3a2905a" title="Determins if user has an apartment number.">hasApartmentNumber</a>() { <span class="keywordflow">return</span> !<a class="code" href="class_boo___validator.html#af4488ea01d6224f01199c2bbf0e4f97d" title="Determins if a value is null.">Boo_Validator::isNull</a>($this-&gt;<a class="code" href="class_boo___user.html#a4221e62d4fe256e8468a809e0e27a358" title="Gets the users apartment number.">getApartmentNumber</a>()); }
<a name="l00387"></a>00387     <span class="comment"></span>
<a name="l00388"></a>00388 <span class="comment">    /**</span>
<a name="l00389"></a>00389 <span class="comment">     * @brief Sets the users city.</span>
<a name="l00390"></a>00390 <span class="comment">     * </span>
<a name="l00391"></a>00391 <span class="comment">     * @param string $city The city.</span>
<a name="l00392"></a>00392 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00393"></a>00393 <span class="comment">     */</span>
<a name="l00394"></a><a class="code" href="class_boo___user.html#a81d1ea796952bfc35fca8a77b1551532">00394</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a81d1ea796952bfc35fca8a77b1551532" title="Sets the users city.">setCity</a>($city) { 
<a name="l00395"></a>00395         $city = <a class="code" href="functions_2core_8php.html#af24e36b758a9f06e154b76b3b1ed0c8d" title="Formats string for insertion into database.">strtodb</a>($city);
<a name="l00396"></a>00396         
<a name="l00397"></a>00397         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#a1b580841fc21a4248e2848eaaccf25fd" title="Determins if a value is a city or not.">Boo_Validator::isCity</a>($city)) {
<a name="l00398"></a>00398             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;city&apos;</span>, $street);
<a name="l00399"></a>00399         } <span class="keywordflow">else</span> {
<a name="l00400"></a>00400             trigger_error(<span class="stringliteral">&quot;City {$city} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00401"></a>00401             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00402"></a>00402         }
<a name="l00403"></a>00403     }
<a name="l00404"></a>00404     <span class="comment"></span>
<a name="l00405"></a>00405 <span class="comment">    /**</span>
<a name="l00406"></a>00406 <span class="comment">     * @brief Gets the users city.</span>
<a name="l00407"></a>00407 <span class="comment">     * </span>
<a name="l00408"></a>00408 <span class="comment">     * @return string Returns the users city if set, FALSE otherwise.</span>
<a name="l00409"></a>00409 <span class="comment">     */</span>
<a name="l00410"></a><a class="code" href="class_boo___user.html#a00957a1af85c4f6013305b648412d805">00410</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a00957a1af85c4f6013305b648412d805" title="Gets the users city.">getCity</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;city&apos;</span>); }
<a name="l00411"></a>00411     <span class="comment"></span>
<a name="l00412"></a>00412 <span class="comment">    /**</span>
<a name="l00413"></a>00413 <span class="comment">     * @brief Sets the users state.</span>
<a name="l00414"></a>00414 <span class="comment">     * </span>
<a name="l00415"></a>00415 <span class="comment">     * @param string $state The state as a state code or state name.</span>
<a name="l00416"></a>00416 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00417"></a>00417 <span class="comment">     */</span>
<a name="l00418"></a><a class="code" href="class_boo___user.html#af757744cea7f4333835bb67fbf5e28bc">00418</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#af757744cea7f4333835bb67fbf5e28bc" title="Sets the users state.">setState</a>($state) {
<a name="l00419"></a>00419         $state = trim($state);
<a name="l00420"></a>00420         
<a name="l00421"></a>00421         <span class="keywordflow">if</span> (!$state) {
<a name="l00422"></a>00422             trigger_error(<span class="stringliteral">&apos;State can not be false&apos;</span>, E_USER_WARNING);
<a name="l00423"></a>00423             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00424"></a>00424         }
<a name="l00425"></a>00425         
<a name="l00426"></a>00426         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#a6b56db16cd809148e7c7c487b989f7af" title="Determins if a state code is valid.">Boo_Validator::isStateCode</a>($state)) {
<a name="l00427"></a>00427             <span class="comment">// $state is a state code</span>
<a name="l00428"></a>00428             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_boo___user.html#a75c4b9b9c20aba1025a1b8e33aace4ad" title="Sets the users state code.">setStateCode</a>($state);
<a name="l00429"></a>00429         } elseif (<a class="code" href="class_boo___validator.html#a3597bfb21db2b5a80fc19aeb85ac52b5" title="Determins if a state name is valid.">Boo_Validator::isStateName</a>($state)) {
<a name="l00430"></a>00430             <span class="comment">// $state is a state name</span>
<a name="l00431"></a>00431             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_boo___user.html#a9deeb8969a84f80f874fb2aa7be62119" title="Sets the users state.">setStateName</a>($state);
<a name="l00432"></a>00432         } <span class="keywordflow">else</span> {
<a name="l00433"></a>00433             <span class="comment">// neither code or name</span>
<a name="l00434"></a>00434             trigger_error(<span class="stringliteral">&quot;State {$state} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00435"></a>00435             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00436"></a>00436         }
<a name="l00437"></a>00437     }
<a name="l00438"></a>00438     <span class="comment"></span>
<a name="l00439"></a>00439 <span class="comment">    /**</span>
<a name="l00440"></a>00440 <span class="comment">     * @brief Sets the users state.</span>
<a name="l00441"></a>00441 <span class="comment">     * </span>
<a name="l00442"></a>00442 <span class="comment">     * @param string $state The state as a state name.</span>
<a name="l00443"></a>00443 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00444"></a>00444 <span class="comment">     */</span>
<a name="l00445"></a><a class="code" href="class_boo___user.html#a9deeb8969a84f80f874fb2aa7be62119">00445</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a9deeb8969a84f80f874fb2aa7be62119" title="Sets the users state.">setStateName</a>($name) {
<a name="l00446"></a>00446         $name = trim($name);
<a name="l00447"></a>00447         
<a name="l00448"></a>00448         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#a3597bfb21db2b5a80fc19aeb85ac52b5" title="Determins if a state name is valid.">Boo_Validator::isStateName</a>($name)) {
<a name="l00449"></a>00449             <span class="comment">// $state is a state name</span>
<a name="l00450"></a>00450             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;state_code&apos;</span>, <a class="code" href="class_boo___helper.html#a825199a4a708a45a60ea3a2388d72224" title="Returns state code.">Boo_Helper::getStateCodeByName</a>($state));
<a name="l00451"></a>00451         } <span class="keywordflow">else</span> {
<a name="l00452"></a>00452             <span class="comment">// neither a code or name</span>
<a name="l00453"></a>00453             trigger_error(<span class="stringliteral">&quot;State name {$name} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00454"></a>00454             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00455"></a>00455         }
<a name="l00456"></a>00456     }
<a name="l00457"></a>00457     <span class="comment"></span>
<a name="l00458"></a>00458 <span class="comment">    /**</span>
<a name="l00459"></a>00459 <span class="comment">     * @brief Sets the users state code.</span>
<a name="l00460"></a>00460 <span class="comment">     * </span>
<a name="l00461"></a>00461 <span class="comment">     * State code is the two letter abbreviation.</span>
<a name="l00462"></a>00462 <span class="comment">     * </span>
<a name="l00463"></a>00463 <span class="comment">     * @see Boo_Validator::$states.</span>
<a name="l00464"></a>00464 <span class="comment">     * @param string $code The state code.</span>
<a name="l00465"></a>00465 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00466"></a>00466 <span class="comment">     */</span>
<a name="l00467"></a><a class="code" href="class_boo___user.html#a75c4b9b9c20aba1025a1b8e33aace4ad">00467</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a75c4b9b9c20aba1025a1b8e33aace4ad" title="Sets the users state code.">setStateCode</a>($code) {
<a name="l00468"></a>00468         $code = strtoupper(trim($code));
<a name="l00469"></a>00469         
<a name="l00470"></a>00470         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#a6b56db16cd809148e7c7c487b989f7af" title="Determins if a state code is valid.">Boo_Validator::isStateCode</a>($code)) {
<a name="l00471"></a>00471             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;state_code&apos;</span>, $code);
<a name="l00472"></a>00472         } <span class="keywordflow">else</span> {
<a name="l00473"></a>00473             <span class="comment">// not a valid code</span>
<a name="l00474"></a>00474             trigger_error(<span class="stringliteral">&quot;State code {$code} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00475"></a>00475             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00476"></a>00476         }
<a name="l00477"></a>00477     }
<a name="l00478"></a>00478     <span class="comment"></span>
<a name="l00479"></a>00479 <span class="comment">    /**</span>
<a name="l00480"></a>00480 <span class="comment">     * @brief Gets the users state code.</span>
<a name="l00481"></a>00481 <span class="comment">     * </span>
<a name="l00482"></a>00482 <span class="comment">     * Provides API compatibility.</span>
<a name="l00483"></a>00483 <span class="comment">     * </span>
<a name="l00484"></a>00484 <span class="comment">     * @see Boo_Validator::$states.</span>
<a name="l00485"></a>00485 <span class="comment">     * @return string State code in strtoupper.</span>
<a name="l00486"></a>00486 <span class="comment">     */</span>
<a name="l00487"></a><a class="code" href="class_boo___user.html#a4f8414f19d2dbf46f6718628154b5bee">00487</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a4f8414f19d2dbf46f6718628154b5bee" title="Gets the users state code.">getState</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;state_code&apos;</span>); }
<a name="l00488"></a>00488     <span class="comment"></span>
<a name="l00489"></a>00489 <span class="comment">    /**</span>
<a name="l00490"></a>00490 <span class="comment">     * @brief Gets the users state code.</span>
<a name="l00491"></a>00491 <span class="comment">     * </span>
<a name="l00492"></a>00492 <span class="comment">     * @see Boo_Validator::$states.</span>
<a name="l00493"></a>00493 <span class="comment">     * @return string State code in strtoupper.</span>
<a name="l00494"></a>00494 <span class="comment">     */</span>
<a name="l00495"></a><a class="code" href="class_boo___user.html#aa32af50b17e0fae5226dd44b311c8426">00495</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#aa32af50b17e0fae5226dd44b311c8426" title="Gets the users state code.">getStateCode</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;state_code&apos;</span>); }
<a name="l00496"></a>00496     <span class="comment"></span>
<a name="l00497"></a>00497 <span class="comment">    /**</span>
<a name="l00498"></a>00498 <span class="comment">     * @brief Gets the users state name.</span>
<a name="l00499"></a>00499 <span class="comment">     * </span>
<a name="l00500"></a>00500 <span class="comment">     * @see Boo_Validator::$states.</span>
<a name="l00501"></a>00501 <span class="comment">     * @return string State name.</span>
<a name="l00502"></a>00502 <span class="comment">     */</span>
<a name="l00503"></a><a class="code" href="class_boo___user.html#a6154f392bddbf1d8da9ebd2ef8f0bef7">00503</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a6154f392bddbf1d8da9ebd2ef8f0bef7" title="Gets the users state name.">getStateName</a>() { <span class="keywordflow">return</span> <a class="code" href="class_boo___helper.html#acc06e11349c10fa350d65033afd161e6" title="Returns state name.">Boo_Helper::getStateNameByCode</a>($this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;state_code&apos;</span>)); }
<a name="l00504"></a>00504     <span class="comment"></span>
<a name="l00505"></a>00505 <span class="comment">    /**</span>
<a name="l00506"></a>00506 <span class="comment">     * @brief Sets the users country.</span>
<a name="l00507"></a>00507 <span class="comment">     * </span>
<a name="l00508"></a>00508 <span class="comment">     * @param string $country The country as a country code or country name.</span>
<a name="l00509"></a>00509 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00510"></a>00510 <span class="comment">     */</span>
<a name="l00511"></a><a class="code" href="class_boo___user.html#a90546b2b8a7f292e2db1f0f96ebae390">00511</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a90546b2b8a7f292e2db1f0f96ebae390" title="Sets the users country.">setCountry</a>($country) {
<a name="l00512"></a>00512         $country = trim($country);
<a name="l00513"></a>00513         
<a name="l00514"></a>00514         <span class="keywordflow">if</span> (!$country) {
<a name="l00515"></a>00515             <span class="keywordflow">if</span> (BOO_WARNING) { trigger_error(<span class="stringliteral">&apos;Country can not be false&apos;</span>, E_USER_WARNING); }
<a name="l00516"></a>00516             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00517"></a>00517         }
<a name="l00518"></a>00518         
<a name="l00519"></a>00519         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#a08b9e37178188ffb896a99835d5bfc78" title="Determins if a country code is valid.">Boo_Validator::isCountryCode</a>($country)) {
<a name="l00520"></a>00520             <span class="comment">// $country is a country code</span>
<a name="l00521"></a>00521             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_boo___user.html#abd7d0470663ea9b429af76ca7b53780c" title="Sets the users country code.">setCountryCode</a>($country);
<a name="l00522"></a>00522         } elseif (<a class="code" href="class_boo___validator.html#a9677fd1f2089c7c70e79f603c9d308b5" title="Determins if a country name is valid.">Boo_Validator::isCountryName</a>($country)) {
<a name="l00523"></a>00523             <span class="comment">// $country is a country name</span>
<a name="l00524"></a>00524             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_boo___user.html#a2b5eca3d979f4276a5b845a9cec4e163" title="Sets the users country.">setCountryName</a>($country);
<a name="l00525"></a>00525         } <span class="keywordflow">else</span> {
<a name="l00526"></a>00526             <span class="comment">// neither code or name</span>
<a name="l00527"></a>00527             trigger_error(<span class="stringliteral">&quot;Country {$country} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00528"></a>00528             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00529"></a>00529         }
<a name="l00530"></a>00530     }
<a name="l00531"></a>00531     <span class="comment"></span>
<a name="l00532"></a>00532 <span class="comment">    /**</span>
<a name="l00533"></a>00533 <span class="comment">     * @brief Sets the users country.</span>
<a name="l00534"></a>00534 <span class="comment">     * </span>
<a name="l00535"></a>00535 <span class="comment">     * @param string $country The country as a country name.</span>
<a name="l00536"></a>00536 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00537"></a>00537 <span class="comment">     */</span>
<a name="l00538"></a><a class="code" href="class_boo___user.html#a2b5eca3d979f4276a5b845a9cec4e163">00538</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a2b5eca3d979f4276a5b845a9cec4e163" title="Sets the users country.">setCountryName</a>($name) {
<a name="l00539"></a>00539         $name = trim($name);
<a name="l00540"></a>00540         
<a name="l00541"></a>00541         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#a9677fd1f2089c7c70e79f603c9d308b5" title="Determins if a country name is valid.">Boo_Validator::isCountryName</a>($name)) {
<a name="l00542"></a>00542             <span class="comment">// $country is a country name</span>
<a name="l00543"></a>00543             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;country_code&apos;</span>, Boo_Helper::getCountryCodeByName($country));
<a name="l00544"></a>00544         } <span class="keywordflow">else</span> {
<a name="l00545"></a>00545             <span class="comment">// neither a code or name</span>
<a name="l00546"></a>00546             trigger_error(<span class="stringliteral">&quot;Country name {$name} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00547"></a>00547             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00548"></a>00548         }
<a name="l00549"></a>00549     }
<a name="l00550"></a>00550     <span class="comment"></span>
<a name="l00551"></a>00551 <span class="comment">    /**</span>
<a name="l00552"></a>00552 <span class="comment">     * @brief Sets the users country code.</span>
<a name="l00553"></a>00553 <span class="comment">     * </span>
<a name="l00554"></a>00554 <span class="comment">     * Country code is the two letter abbreviation.</span>
<a name="l00555"></a>00555 <span class="comment">     * </span>
<a name="l00556"></a>00556 <span class="comment">     * @see Boo_Validator::$countries.</span>
<a name="l00557"></a>00557 <span class="comment">     * @param string $code The country code.</span>
<a name="l00558"></a>00558 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00559"></a>00559 <span class="comment">     */</span>
<a name="l00560"></a><a class="code" href="class_boo___user.html#abd7d0470663ea9b429af76ca7b53780c">00560</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#abd7d0470663ea9b429af76ca7b53780c" title="Sets the users country code.">setCountryCode</a>($code) {
<a name="l00561"></a>00561         $code = strtoupper(trim($code));
<a name="l00562"></a>00562         
<a name="l00563"></a>00563         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#a08b9e37178188ffb896a99835d5bfc78" title="Determins if a country code is valid.">Boo_Validator::isCountryCode</a>($code)) {
<a name="l00564"></a>00564             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;country_code&apos;</span>, $code);
<a name="l00565"></a>00565         } <span class="keywordflow">else</span> {
<a name="l00566"></a>00566             <span class="comment">// not a valid code</span>
<a name="l00567"></a>00567             trigger_error(<span class="stringliteral">&quot;Country code {$code} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00568"></a>00568             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00569"></a>00569         }
<a name="l00570"></a>00570     }
<a name="l00571"></a>00571     <span class="comment"></span>
<a name="l00572"></a>00572 <span class="comment">    /**</span>
<a name="l00573"></a>00573 <span class="comment">     * @brief Gets the users country code.</span>
<a name="l00574"></a>00574 <span class="comment">     * </span>
<a name="l00575"></a>00575 <span class="comment">     * Provides API compatibility.</span>
<a name="l00576"></a>00576 <span class="comment">     * </span>
<a name="l00577"></a>00577 <span class="comment">     * @see Boo_Validator::$countries.</span>
<a name="l00578"></a>00578 <span class="comment">     * @return string Country code in strtoupper.</span>
<a name="l00579"></a>00579 <span class="comment">     */</span>
<a name="l00580"></a><a class="code" href="class_boo___user.html#adf0d489fe0f400d1837d5cb71da9303e">00580</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#adf0d489fe0f400d1837d5cb71da9303e" title="Gets the users country code.">getCountry</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;country_code&apos;</span>); }
<a name="l00581"></a>00581     <span class="comment"></span>
<a name="l00582"></a>00582 <span class="comment">    /**</span>
<a name="l00583"></a>00583 <span class="comment">     * @brief Gets the users country code.</span>
<a name="l00584"></a>00584 <span class="comment">     * </span>
<a name="l00585"></a>00585 <span class="comment">     * @see Boo_Validator::$countries.</span>
<a name="l00586"></a>00586 <span class="comment">     * @return string Country code in strtoupper.</span>
<a name="l00587"></a>00587 <span class="comment">     */</span>
<a name="l00588"></a><a class="code" href="class_boo___user.html#a28b9f66cc2736e15d02c0e0616da7270">00588</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a28b9f66cc2736e15d02c0e0616da7270" title="Gets the users country code.">getCountryCode</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;country_code&apos;</span>); }
<a name="l00589"></a>00589     <span class="comment"></span>
<a name="l00590"></a>00590 <span class="comment">    /**</span>
<a name="l00591"></a>00591 <span class="comment">     * @brief Gets the users country name.</span>
<a name="l00592"></a>00592 <span class="comment">     * </span>
<a name="l00593"></a>00593 <span class="comment">     * @see Boo_Validator::$countries.</span>
<a name="l00594"></a>00594 <span class="comment">     * @return string Country name.</span>
<a name="l00595"></a>00595 <span class="comment">     */</span>
<a name="l00596"></a><a class="code" href="class_boo___user.html#a4aeab11f38667a3367fd0c9170971b44">00596</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a4aeab11f38667a3367fd0c9170971b44" title="Gets the users country name.">getCountryName</a>() { <span class="keywordflow">return</span> <a class="code" href="class_boo___helper.html#adca88c893d3c9ca8fa65a2d96e88b844" title="Returns country name.">Boo_Helper::getCountryNameByCode</a>($this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;country_code&apos;</span>)); }
<a name="l00597"></a>00597     <span class="comment"></span>
<a name="l00598"></a>00598 <span class="comment">    /**</span>
<a name="l00599"></a>00599 <span class="comment">     * @brief Sets the users ZIP code.</span>
<a name="l00600"></a>00600 <span class="comment">     *</span>
<a name="l00601"></a>00601 <span class="comment">     * @param string $zip The ZIP code.</span>
<a name="l00602"></a>00602 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00603"></a>00603 <span class="comment">     */</span>
<a name="l00604"></a><a class="code" href="class_boo___user.html#a3212b1cfa91fcfacf47d92c967f60f24">00604</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a3212b1cfa91fcfacf47d92c967f60f24" title="Sets the users ZIP code.">setZip</a>($zip) {
<a name="l00605"></a>00605         $zip = <a class="code" href="class_boo___format.html#aa15071521a1cceb406731fb0f51ca2bc" title="Formats ZIP code.">Boo_Format::formatZip</a>($zip);
<a name="l00606"></a>00606         
<a name="l00607"></a>00607         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#ace404d028e04a1da5f2b3682321583b6" title="Determins if a ZIP code is valid.">Boo_Validator::isZip</a>($zip)) {
<a name="l00608"></a>00608             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;zip&apos;</span>, $zip);
<a name="l00609"></a>00609         } <span class="keywordflow">else</span> {
<a name="l00610"></a>00610             trigger_error(<span class="stringliteral">&quot;ZIP {$zip} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00611"></a>00611             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00612"></a>00612         }
<a name="l00613"></a>00613     }
<a name="l00614"></a>00614     <span class="comment"></span>
<a name="l00615"></a>00615 <span class="comment">    /**</span>
<a name="l00616"></a>00616 <span class="comment">     * @brief Gets the users ZIP code.</span>
<a name="l00617"></a>00617 <span class="comment">     * </span>
<a name="l00618"></a>00618 <span class="comment">     * @return string ZIP code.</span>
<a name="l00619"></a>00619 <span class="comment">     */</span>
<a name="l00620"></a><a class="code" href="class_boo___user.html#af5535d6fc9a35c212057644c85bde3ac">00620</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#af5535d6fc9a35c212057644c85bde3ac" title="Gets the users ZIP code.">getZip</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;zip&apos;</span>); }
<a name="l00621"></a>00621     <span class="comment"></span>
<a name="l00622"></a>00622 <span class="comment">    /**</span>
<a name="l00623"></a>00623 <span class="comment">     * @brief Sets the users carrier ID.</span>
<a name="l00624"></a>00624 <span class="comment">     * </span>
<a name="l00625"></a>00625 <span class="comment">     * @see Boo_SMS</span>
<a name="l00626"></a>00626 <span class="comment">     * @param int $carrierId The carrier ID.</span>
<a name="l00627"></a>00627 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00628"></a>00628 <span class="comment">     */</span>
<a name="l00629"></a><a class="code" href="class_boo___user.html#aa8bf0227ade51e6a660372598a640168">00629</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#aa8bf0227ade51e6a660372598a640168" title="Sets the users carrier ID.">setCarrierId</a>($carrierId) {
<a name="l00630"></a>00630         $carrierId = (int) $carrierId;
<a name="l00631"></a>00631         
<a name="l00632"></a>00632         <span class="keywordflow">if</span> (Boo_SMS::isCarrierId($carrierId)) {
<a name="l00633"></a>00633             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;carrier_id&apos;</span>, $carrierId);
<a name="l00634"></a>00634         } <span class="keywordflow">else</span> {
<a name="l00635"></a>00635             trigger_error(<span class="stringliteral">&quot;Carrier ID {$carrierId} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00636"></a>00636             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00637"></a>00637         }
<a name="l00638"></a>00638     }
<a name="l00639"></a>00639     <span class="comment"></span>
<a name="l00640"></a>00640 <span class="comment">    /**</span>
<a name="l00641"></a>00641 <span class="comment">     * @brief Gets the users carrier ID.</span>
<a name="l00642"></a>00642 <span class="comment">     * </span>
<a name="l00643"></a>00643 <span class="comment">     * @return int The carrier ID.</span>
<a name="l00644"></a>00644 <span class="comment">     */</span>
<a name="l00645"></a><a class="code" href="class_boo___user.html#a840640aa7631e087b545ae295b54141c">00645</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a840640aa7631e087b545ae295b54141c" title="Gets the users carrier ID.">getCarrierId</a>() { <span class="keywordflow">return</span> $this-&gt;carrierId; }
<a name="l00646"></a>00646     <span class="comment"></span>
<a name="l00647"></a>00647 <span class="comment">    /** </span>
<a name="l00648"></a>00648 <span class="comment">     * @brief Sets the users SMS number.</span>
<a name="l00649"></a>00649 <span class="comment">     * </span>
<a name="l00650"></a>00650 <span class="comment">     * @param string $smsNumber The SMS number</span>
<a name="l00651"></a>00651 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00652"></a>00652 <span class="comment">     */</span>
<a name="l00653"></a><a class="code" href="class_boo___user.html#a697658cd4f52b8b40279f2ae1954dbe6">00653</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a697658cd4f52b8b40279f2ae1954dbe6" title="Sets the users SMS number.">setSmsNumber</a>($smsNumber) {
<a name="l00654"></a>00654         $smsNumber = <a class="code" href="class_boo___format.html#a516519a4d0c1da240f82a3d4cc81ee64" title="Formats phone number.">Boo_Format::formatPhoneNumber</a>($smsNumber);
<a name="l00655"></a>00655         
<a name="l00656"></a>00656         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#af417d8740e2fad697b76c09123a7af78" title="Determins if a phone number is valid.">Boo_Validator::isPhoneNumber</a>($smsNumber)) {
<a name="l00657"></a>00657             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;sms_number&apos;</span>, $smsNumber);
<a name="l00658"></a>00658         } <span class="keywordflow">else</span> {
<a name="l00659"></a>00659             trigger_error(<span class="stringliteral">&quot;SMS number {$smsNumber} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00660"></a>00660             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00661"></a>00661         }
<a name="l00662"></a>00662     }
<a name="l00663"></a>00663     <span class="comment"></span>
<a name="l00664"></a>00664 <span class="comment">    /**</span>
<a name="l00665"></a>00665 <span class="comment">     * @brief Gets the users SMS number.</span>
<a name="l00666"></a>00666 <span class="comment">     * </span>
<a name="l00667"></a>00667 <span class="comment">     * @return string The SMS number if available, empty string otherwise.</span>
<a name="l00668"></a>00668 <span class="comment">     */</span>
<a name="l00669"></a><a class="code" href="class_boo___user.html#a55b5bb34cf1bf0b8ee478d721ddc1042">00669</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a55b5bb34cf1bf0b8ee478d721ddc1042" title="Gets the users SMS number.">getSmsNumber</a>() { <span class="keywordflow">return</span> ($this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;sms_number&apos;</span>)) ? $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;sms_number&apos;</span>) : <span class="stringliteral">&apos;&apos;</span>; }
<a name="l00670"></a>00670     <span class="comment"></span>
<a name="l00671"></a>00671 <span class="comment">    /**</span>
<a name="l00672"></a>00672 <span class="comment">     * @brief Sets the users fax number.</span>
<a name="l00673"></a>00673 <span class="comment">     * </span>
<a name="l00674"></a>00674 <span class="comment">     * @param string $faxNumber The fax number</span>
<a name="l00675"></a>00675 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00676"></a>00676 <span class="comment">     */</span>
<a name="l00677"></a><a class="code" href="class_boo___user.html#a792d087a095594b1cd39861a68bf8217">00677</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a792d087a095594b1cd39861a68bf8217" title="Sets the users fax number.">setFaxNumber</a>($faxNumber) {
<a name="l00678"></a>00678         $faxNumber = Boo_Fromat::formatPhoneNumber($faxNumber);
<a name="l00679"></a>00679         
<a name="l00680"></a>00680         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#af417d8740e2fad697b76c09123a7af78" title="Determins if a phone number is valid.">Boo_Validator::isPhoneNumber</a>($faxNumber)) {
<a name="l00681"></a>00681             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;fax_number&apos;</span>, $faxNumber);
<a name="l00682"></a>00682         } <span class="keywordflow">else</span> {
<a name="l00683"></a>00683             trigger_error(<span class="stringliteral">&quot;Fax number {$faxNumber} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00684"></a>00684             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00685"></a>00685         }
<a name="l00686"></a>00686     }
<a name="l00687"></a>00687     <span class="comment"></span>
<a name="l00688"></a>00688 <span class="comment">    /**</span>
<a name="l00689"></a>00689 <span class="comment">     * @brief Gets the users fax number.</span>
<a name="l00690"></a>00690 <span class="comment">     * </span>
<a name="l00691"></a>00691 <span class="comment">     * @return string The fax number if available, empty string otherwise.</span>
<a name="l00692"></a>00692 <span class="comment">     */</span>
<a name="l00693"></a><a class="code" href="class_boo___user.html#af4ea690dc2f9c17e2ccf531d611f0e80">00693</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#af4ea690dc2f9c17e2ccf531d611f0e80" title="Gets the users fax number.">getFaxNumber</a>() { <span class="keywordflow">return</span> ($this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;fax_number&apos;</span>)) ? $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;fax_number&apos;</span>) : <span class="stringliteral">&apos;&apos;</span>; }
<a name="l00694"></a>00694     <span class="comment"></span>
<a name="l00695"></a>00695 <span class="comment">    /**</span>
<a name="l00696"></a>00696 <span class="comment">     * @brief Sets the users phone number.</span>
<a name="l00697"></a>00697 <span class="comment">     * </span>
<a name="l00698"></a>00698 <span class="comment">     * @param string $phoneNumber The phone number</span>
<a name="l00699"></a>00699 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00700"></a>00700 <span class="comment">     */</span>
<a name="l00701"></a><a class="code" href="class_boo___user.html#acfc41fe67afb39fa92482c35bb713cae">00701</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#acfc41fe67afb39fa92482c35bb713cae" title="Sets the users phone number.">setPhoneNumber</a>($phoneNumber) {
<a name="l00702"></a>00702         
<a name="l00703"></a>00703         $phoneNumber = <a class="code" href="class_boo___format.html#a516519a4d0c1da240f82a3d4cc81ee64" title="Formats phone number.">Boo_Format::formatPhoneNumber</a>($phoneNumber);
<a name="l00704"></a>00704         
<a name="l00705"></a>00705         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#af417d8740e2fad697b76c09123a7af78" title="Determins if a phone number is valid.">Boo_Validator::isPhoneNumber</a>($phoneNumber)) {
<a name="l00706"></a>00706             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;phone_number&apos;</span>, $phoneNumber);
<a name="l00707"></a>00707         } <span class="keywordflow">else</span> {
<a name="l00708"></a>00708             trigger_error(<span class="stringliteral">&quot;Phone number {$phoneNumber} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00709"></a>00709             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00710"></a>00710         }
<a name="l00711"></a>00711     }
<a name="l00712"></a>00712     <span class="comment"></span>
<a name="l00713"></a>00713 <span class="comment">    /**</span>
<a name="l00714"></a>00714 <span class="comment">     * @brief Gets the users phone number.</span>
<a name="l00715"></a>00715 <span class="comment">     * </span>
<a name="l00716"></a>00716 <span class="comment">     * @return string The phone number if available, empty string otherwise.</span>
<a name="l00717"></a>00717 <span class="comment">     */</span>
<a name="l00718"></a><a class="code" href="class_boo___user.html#aba30c31b74c5c286a48183854c5b0fc5">00718</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#aba30c31b74c5c286a48183854c5b0fc5" title="Gets the users phone number.">getPhoneNumber</a>() { <span class="keywordflow">return</span> ($this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;phone_number&apos;</span>)) ? $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;phone_number&apos;</span>) : <span class="stringliteral">&apos;&apos;</span>; }
<a name="l00719"></a>00719     <span class="comment"></span>
<a name="l00720"></a>00720 <span class="comment">    /**</span>
<a name="l00721"></a>00721 <span class="comment">     * @brief Gets the users ID.</span>
<a name="l00722"></a>00722 <span class="comment">     * </span>
<a name="l00723"></a>00723 <span class="comment">     * @return int The users ID.</span>
<a name="l00724"></a>00724 <span class="comment">     */</span>
<a name="l00725"></a><a class="code" href="class_boo___user.html#a8370de49b20b86ddce6f521c8303d5bf">00725</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a8370de49b20b86ddce6f521c8303d5bf" title="Gets the users ID.">getUserId</a>() { <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;user_id&apos;</span>); }
<a name="l00726"></a>00726     <span class="comment"></span>
<a name="l00727"></a>00727 <span class="comment">    /**</span>
<a name="l00728"></a>00728 <span class="comment">     * @brief Gets the users link as a HTML anchor.</span>
<a name="l00729"></a>00729 <span class="comment">     * </span>
<a name="l00730"></a>00730 <span class="comment">     * @param array $attrs[optional] Array of attributes.</span>
<a name="l00731"></a>00731 <span class="comment">     * @return Boo_Html The users link as a HTML anchor, FALSE on failure.</span>
<a name="l00732"></a>00732 <span class="comment">     */</span>
<a name="l00733"></a><a class="code" href="class_boo___user.html#a486a14c8739d2496a3039852ff426b8c">00733</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a486a14c8739d2496a3039852ff426b8c" title="Gets the users link as a HTML anchor.">htmlUserA</a>(array $attrs = array()) {
<a name="l00734"></a>00734         $username = $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;username&apos;</span>);
<a name="l00735"></a>00735         <span class="keywordflow">if</span> ($username) {
<a name="l00736"></a>00736             
<a name="l00737"></a>00737             $a = <span class="keyword">new</span> <a class="code" href="class_boo___html___a.html" title="HTML anchor class.">Boo_Html_A</a>;
<a name="l00738"></a>00738             $a-&gt;applyAttrs($attrs);
<a name="l00739"></a>00739             
<a name="l00740"></a>00740             $a-&gt;setAttr(<span class="stringliteral">&apos;href&apos;</span>, <span class="stringliteral">&quot;/user/{$username}/&quot;</span>);
<a name="l00741"></a>00741             $a-&gt;setContent($username);
<a name="l00742"></a>00742             
<a name="l00743"></a>00743             <span class="keywordflow">return</span> $a;
<a name="l00744"></a>00744         } <span class="keywordflow">else</span> {
<a name="l00745"></a>00745             trigger_error(<span class="stringliteral">&apos;Username can not be false&apos;</span>, E_USER_NOTICE);
<a name="l00746"></a>00746             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00747"></a>00747         }
<a name="l00748"></a>00748     }
<a name="l00749"></a>00749     
<a name="l00750"></a>00750     
<a name="l00751"></a>00751     <span class="comment"></span>
<a name="l00752"></a>00752 <span class="comment">    /**</span>
<a name="l00753"></a>00753 <span class="comment">     * @brief Sets the users username.</span>
<a name="l00754"></a>00754 <span class="comment">     * </span>
<a name="l00755"></a>00755 <span class="comment">     * Setting the username to an already existing username will generate an \c E_USER_WARNING</span>
<a name="l00756"></a>00756 <span class="comment">     * and return FALSE.</span>
<a name="l00757"></a>00757 <span class="comment">     * </span>
<a name="l00758"></a>00758 <span class="comment">     * @param string $username The username.</span>
<a name="l00759"></a>00759 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00760"></a>00760 <span class="comment">     */</span>
<a name="l00761"></a><a class="code" href="class_boo___user.html#a8bd9afeab4f09a57a4c1bff1d86a9d8a">00761</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a8bd9afeab4f09a57a4c1bff1d86a9d8a" title="Sets the users username.">setUsername</a>($username) {
<a name="l00762"></a>00762         $username = strtolower(trim($username));
<a name="l00763"></a>00763         
<a name="l00764"></a>00764         <span class="keywordflow">if</span> (self::isUsername($username)) {
<a name="l00765"></a>00765             trigger_error(<span class="stringliteral">&quot;Username {$username} already exists&quot;</span>, E_USER_WARNING);
<a name="l00766"></a>00766             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00767"></a>00767         } <span class="keywordflow">else</span> {
<a name="l00768"></a>00768             <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#ac8458a4e029906a240976eff19e24630" title="Determines if a username is valid.">Boo_Validator::isUsername</a>($username)) {
<a name="l00769"></a>00769                 <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;username&apos;</span>, $username);
<a name="l00770"></a>00770             } <span class="keywordflow">else</span> {
<a name="l00771"></a>00771                 trigger_error(<span class="stringliteral">&quot;Username {$username} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00772"></a>00772                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00773"></a>00773             }
<a name="l00774"></a>00774         }
<a name="l00775"></a>00775     }
<a name="l00776"></a>00776     <span class="comment"></span>
<a name="l00777"></a>00777 <span class="comment">    /**</span>
<a name="l00778"></a>00778 <span class="comment">     * @breif Gets the users username.</span>
<a name="l00779"></a>00779 <span class="comment">     * </span>
<a name="l00780"></a>00780 <span class="comment">     * @return string The users usersname.</span>
<a name="l00781"></a>00781 <span class="comment">     */</span>
<a name="l00782"></a><a class="code" href="class_boo___user.html#a99ea65a69f7b7beaf6a24c020c568af5">00782</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a99ea65a69f7b7beaf6a24c020c568af5">getUsername</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;username&apos;</span>); }
<a name="l00783"></a>00783 <span class="comment"></span>
<a name="l00784"></a>00784 <span class="comment">    /**</span>
<a name="l00785"></a>00785 <span class="comment">     * @brief Sets the users password.</span>
<a name="l00786"></a>00786 <span class="comment">     * </span>
<a name="l00787"></a>00787 <span class="comment">     * @param string $password The password.</span>
<a name="l00788"></a>00788 <span class="comment">     * @return bool Returns TRUE on success, FALSE on failure.</span>
<a name="l00789"></a>00789 <span class="comment">     */</span>
<a name="l00790"></a><a class="code" href="class_boo___user.html#a0107a2000cd3f3ca80513de1a10950ac">00790</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a0107a2000cd3f3ca80513de1a10950ac" title="Sets the users password.">setPassword</a>($password) {
<a name="l00791"></a>00791         $password = trim($password);
<a name="l00792"></a>00792         
<a name="l00793"></a>00793         <span class="keywordflow">if</span> (!<a class="code" href="class_boo___validator.html#a9f200e085ffccc73327eff0d23c331b1" title="Determins if a password is valid.">Boo_Validator::isPassword</a>($password)) {
<a name="l00794"></a>00794             <span class="keywordflow">if</span> (BOO_WARNING) { trigger_error(<span class="stringliteral">&quot;Password (hidden) is not valid&quot;</span>, E_USER_WARNING); }
<a name="l00795"></a>00795             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00796"></a>00796         }
<a name="l00797"></a>00797         <span class="keywordflow">if</span> ($password == <span class="stringliteral">&apos;********&apos;</span> &amp;&amp; $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;password_hash&apos;</span>)) {
<a name="l00798"></a>00798             <span class="comment">// password is already set</span>
<a name="l00799"></a>00799             <span class="comment">// ignore this request</span>
<a name="l00800"></a>00800             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00801"></a>00801         }
<a name="l00802"></a>00802         $result = <span class="keyword">true</span>;
<a name="l00803"></a>00803         $result = $result &amp;&amp; $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;password&apos;</span>, $password);
<a name="l00804"></a>00804         <span class="comment">// generate password hash</span>
<a name="l00805"></a>00805         $salt = hash(<span class="stringliteral">&apos;md5&apos;</span>, uniqid(rand(), <span class="keyword">true</span>)); <span class="comment">// 32 character salt</span>
<a name="l00806"></a>00806         $result = $result &amp;&amp; $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;password_hash&apos;</span>, hash(<span class="stringliteral">&apos;sha256&apos;</span>, $password . BOO_SECRET . $salt)); <span class="comment">// 64 character password hash</span>
<a name="l00807"></a>00807         $result = $result &amp;&amp; $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;salt&apos;</span>, $salt); <span class="comment">// save salt</span>
<a name="l00808"></a>00808         <span class="keywordflow">return</span> $result;
<a name="l00809"></a>00809     }
<a name="l00810"></a>00810     <span class="comment"></span>
<a name="l00811"></a>00811 <span class="comment">    /**</span>
<a name="l00812"></a>00812 <span class="comment">     * @brief Gets the users password hash.</span>
<a name="l00813"></a>00813 <span class="comment">     * @return string The password hash.</span>
<a name="l00814"></a>00814 <span class="comment">     */</span>
<a name="l00815"></a><a class="code" href="class_boo___user.html#ae14f4b1720cc2cca9d94005c9d413ea8">00815</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#ae14f4b1720cc2cca9d94005c9d413ea8" title="Gets the users password hash.">getPasswordHash</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;password_hash&apos;</span>); }
<a name="l00816"></a>00816     <span class="comment"></span>
<a name="l00817"></a>00817 <span class="comment">    /**</span>
<a name="l00818"></a>00818 <span class="comment">     * @brief Gets the users password salt.</span>
<a name="l00819"></a>00819 <span class="comment">     * @return string The password salt.</span>
<a name="l00820"></a>00820 <span class="comment">     */</span>
<a name="l00821"></a><a class="code" href="class_boo___user.html#abc87714376cf9ed7e57b9c6faf12b924">00821</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#abc87714376cf9ed7e57b9c6faf12b924" title="Gets the users password salt.">getSalt</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;salt&apos;</span>); }
<a name="l00822"></a>00822     
<a name="l00823"></a><a class="code" href="class_boo___user.html#a838ba6764c65ed24dadecb70497539e4">00823</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a838ba6764c65ed24dadecb70497539e4">isAuthTokenValid</a>($authToken) {
<a name="l00824"></a>00824         $authToken = strtolower(trim($authToken));
<a name="l00825"></a>00825         <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_boo___user.html#a7b718deff2abe3447b488bb838330007">getAuthToken</a>() == $authToken;
<a name="l00826"></a>00826     }
<a name="l00827"></a>00827     
<a name="l00828"></a><a class="code" href="class_boo___user.html#a7b718deff2abe3447b488bb838330007">00828</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a7b718deff2abe3447b488bb838330007">getAuthToken</a>() {
<a name="l00829"></a>00829         <span class="keywordflow">return</span> hash(<span class="stringliteral">&apos;sha256&apos;</span>, $this-&gt;<a class="code" href="class_boo___user.html#a8370de49b20b86ddce6f521c8303d5bf" title="Gets the users ID.">getUserId</a>() .  $this-&gt;<a class="code" href="class_boo___user.html#ae14f4b1720cc2cca9d94005c9d413ea8" title="Gets the users password hash.">getPasswordHash</a>() . $this-&gt;<a class="code" href="class_boo___user.html#abc87714376cf9ed7e57b9c6faf12b924" title="Gets the users password salt.">getSalt</a>() . BOO_SECRET);
<a name="l00830"></a>00830     }
<a name="l00831"></a>00831     
<a name="l00832"></a>00832     
<a name="l00833"></a><a class="code" href="class_boo___user.html#a30261bcda4b83fe354c9f85650f5cfe8">00833</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a30261bcda4b83fe354c9f85650f5cfe8">htmlAuthA</a>(array $attrs = array()) {
<a name="l00834"></a>00834         $a = <span class="keyword">new</span> <a class="code" href="class_boo___html___a.html" title="HTML anchor class.">Boo_Html_A</a>;
<a name="l00835"></a>00835         $a-&gt;applyAttrs($attrs);
<a name="l00836"></a>00836         
<a name="l00837"></a>00837         <span class="keywordflow">if</span> (BOO_SSL) {
<a name="l00838"></a>00838             $url = <span class="stringliteral">&apos;https://&apos;</span>;
<a name="l00839"></a>00839         } <span class="keywordflow">else</span> {
<a name="l00840"></a>00840             $url = <span class="stringliteral">&apos;http://&apos;</span>;
<a name="l00841"></a>00841         }
<a name="l00842"></a>00842         
<a name="l00843"></a>00843         
<a name="l00844"></a>00844         $url .= <a class="code" href="example_8com_8php.html#a0596424aa659a73d52567aa3e3181471" title="Your domain name.">BOO_DOMAIN</a> . <span class="stringliteral">&apos;/password/reset/&apos;</span> . $this-&gt;<a class="code" href="class_boo___user.html#a8370de49b20b86ddce6f521c8303d5bf" title="Gets the users ID.">getUserId</a>() . <span class="charliteral">&apos;/&apos;</span> . $this-&gt;<a class="code" href="class_boo___user.html#a7b718deff2abe3447b488bb838330007">getAuthToken</a>() . <span class="charliteral">&apos;/&apos;</span>;
<a name="l00845"></a>00845         $a-&gt;setAttr(<span class="stringliteral">&apos;src&apos;</span>, $url);
<a name="l00846"></a>00846         
<a name="l00847"></a>00847         <span class="keywordflow">return</span> $a;
<a name="l00848"></a>00848     }
<a name="l00849"></a>00849     <span class="comment"></span>
<a name="l00850"></a>00850 <span class="comment">    /**</span>
<a name="l00851"></a>00851 <span class="comment">     * @brief Sets the users email address.</span>
<a name="l00852"></a>00852 <span class="comment">     * </span>
<a name="l00853"></a>00853 <span class="comment">     * @param string $email The email address.</span>
<a name="l00854"></a>00854 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l00855"></a>00855 <span class="comment">     */</span>
<a name="l00856"></a><a class="code" href="class_boo___user.html#a81e616ba0746f0fc689fcf562e0f28c3">00856</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a81e616ba0746f0fc689fcf562e0f28c3" title="Sets the users email address.">setEmail</a>($email) {
<a name="l00857"></a>00857         $email = <a class="code" href="class_boo___format.html#aca006a2a829fc1912fe619531d3e1deb" title="Formats email address.">Boo_Format::formatEmail</a>($email);
<a name="l00858"></a>00858         
<a name="l00859"></a>00859         <span class="keywordflow">if</span> (<a class="code" href="class_boo___validator.html#aa7236c4b2b732280174843978380861b" title="Determins if an email address is valid.">Boo_Validator::isEmail</a>($email)) {
<a name="l00860"></a>00860             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;email&apos;</span>, $email);
<a name="l00861"></a>00861         } <span class="keywordflow">else</span> {
<a name="l00862"></a>00862             trigger_error(<span class="stringliteral">&quot;Email address {$email} is not valid&quot;</span>, E_USER_WARNING);
<a name="l00863"></a>00863             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00864"></a>00864         }
<a name="l00865"></a>00865     }
<a name="l00866"></a>00866     <span class="comment"></span>
<a name="l00867"></a>00867 <span class="comment">    /**</span>
<a name="l00868"></a>00868 <span class="comment">     * @brief Gets the users email address.</span>
<a name="l00869"></a>00869 <span class="comment">     * </span>
<a name="l00870"></a>00870 <span class="comment">     * @return string The users email address.</span>
<a name="l00871"></a>00871 <span class="comment">     */</span>
<a name="l00872"></a><a class="code" href="class_boo___user.html#a09de3e507560ce87a7794295e65c2523">00872</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a09de3e507560ce87a7794295e65c2523" title="Gets the users email address.">getEmail</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;email&apos;</span>); }
<a name="l00873"></a>00873     <span class="comment"></span>
<a name="l00874"></a>00874 <span class="comment">    /**</span>
<a name="l00875"></a>00875 <span class="comment">     * @brief Gets the users email address link.</span>
<a name="l00876"></a>00876 <span class="comment">     * </span>
<a name="l00877"></a>00877 <span class="comment">     * @param string $subject[optional] The subject.</span>
<a name="l00878"></a>00878 <span class="comment">     * @return string The users email address link as a URL, FALSE on failure.</span>
<a name="l00879"></a>00879 <span class="comment">     */</span>
<a name="l00880"></a><a class="code" href="class_boo___user.html#aa7082aa82d1158a9bdee3a6af62862c0">00880</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#aa7082aa82d1158a9bdee3a6af62862c0" title="Gets the users email address link.">getEmailLink</a>($subject = <span class="keyword">false</span>) {
<a name="l00881"></a>00881         $email = $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;email&apos;</span>);
<a name="l00882"></a>00882         <span class="keywordflow">if</span> ($email) {
<a name="l00883"></a>00883             $result = <span class="stringliteral">&quot;mailto:{$email}&quot;</span>;
<a name="l00884"></a>00884             <span class="keywordflow">if</span> ($subject) {
<a name="l00885"></a>00885                 $result .= <span class="stringliteral">&quot;?subject={$subject}&quot;</span>;
<a name="l00886"></a>00886             }
<a name="l00887"></a>00887             <span class="keywordflow">return</span> $result;
<a name="l00888"></a>00888         } <span class="keywordflow">else</span> {
<a name="l00889"></a>00889             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00890"></a>00890         }
<a name="l00891"></a>00891     }
<a name="l00892"></a>00892     <span class="comment"></span>
<a name="l00893"></a>00893 <span class="comment">    /**</span>
<a name="l00894"></a>00894 <span class="comment">     * @brief Gets the users email address as a HTML anchor.</span>
<a name="l00895"></a>00895 <span class="comment">     * </span>
<a name="l00896"></a>00896 <span class="comment">     * @param array $attrs[optional] Array of attributes.</span>
<a name="l00897"></a>00897 <span class="comment">     * @param string $subject[optional] The subject.</span>
<a name="l00898"></a>00898 <span class="comment">     * @return Boo_Html The users link as a HTML anchor, FALSE on failure.</span>
<a name="l00899"></a>00899 <span class="comment">     */</span>
<a name="l00900"></a><a class="code" href="class_boo___user.html#ab16cce805e68dec53281572dc1e0ba7c">00900</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#ab16cce805e68dec53281572dc1e0ba7c" title="Gets the users email address as a HTML anchor.">htmlEmailA</a>(array $attrs = array(), $subject = <span class="keyword">false</span>) {
<a name="l00901"></a>00901         $email = $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;email&apos;</span>);
<a name="l00902"></a>00902         <span class="keywordflow">if</span> ($email) {
<a name="l00903"></a>00903             $a = <span class="keyword">new</span> <a class="code" href="class_boo___html___a.html" title="HTML anchor class.">Boo_Html_A</a>;
<a name="l00904"></a>00904             $a-&gt;applyAttrs($attrs);
<a name="l00905"></a>00905             
<a name="l00906"></a>00906             $a-&gt;setAttr(<span class="stringliteral">&apos;href&apos;</span>, $this-&gt;<a class="code" href="class_boo___user.html#aa7082aa82d1158a9bdee3a6af62862c0" title="Gets the users email address link.">getEmailLink</a>($subject));
<a name="l00907"></a>00907             $a-&gt;addClass(<span class="stringliteral">&apos;email&apos;</span>);
<a name="l00908"></a>00908             $a-&gt;setContent($email);
<a name="l00909"></a>00909             
<a name="l00910"></a>00910             <span class="keywordflow">return</span> $a;
<a name="l00911"></a>00911             
<a name="l00912"></a>00912             
<a name="l00913"></a>00913         } <span class="keywordflow">else</span> {
<a name="l00914"></a>00914             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00915"></a>00915         }
<a name="l00916"></a>00916     }
<a name="l00917"></a>00917     
<a name="l00918"></a>00918     <span class="comment"></span>
<a name="l00919"></a>00919 <span class="comment">    /**</span>
<a name="l00920"></a>00920 <span class="comment">     * @brief Gets the time of the users last login.</span>
<a name="l00921"></a>00921 <span class="comment">     * </span>
<a name="l00922"></a>00922 <span class="comment">     * @return int Unix timestamp of the last login.</span>
<a name="l00923"></a>00923 <span class="comment">     */</span>
<a name="l00924"></a><a class="code" href="class_boo___user.html#a50cac5a8799720fc690c4be023af9747">00924</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a50cac5a8799720fc690c4be023af9747" title="Gets the time of the users last login.">getLastLogin</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;last_login&apos;</span>); }
<a name="l00925"></a>00925     <span class="comment"></span>
<a name="l00926"></a>00926 <span class="comment">    /**</span>
<a name="l00927"></a>00927 <span class="comment">     * @brief Gets the time of the users last IP.</span>
<a name="l00928"></a>00928 <span class="comment">     * </span>
<a name="l00929"></a>00929 <span class="comment">     * @return int Unix timestamp of the last IP used by the user.</span>
<a name="l00930"></a>00930 <span class="comment">     */</span>
<a name="l00931"></a><a class="code" href="class_boo___user.html#a30c2095333e5af748d2a7903667814d3">00931</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a30c2095333e5af748d2a7903667814d3" title="Gets the time of the users last IP.">getLastIp</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;last_ip&apos;</span>); }
<a name="l00932"></a>00932     <span class="comment"></span>
<a name="l00933"></a>00933 <span class="comment">    /**</span>
<a name="l00934"></a>00934 <span class="comment">     * @brief Authorize user.</span>
<a name="l00935"></a>00935 <span class="comment">     * </span>
<a name="l00936"></a>00936 <span class="comment">     * @return Returns TRUE on success, FALSE otherwise.</span>
<a name="l00937"></a>00937 <span class="comment">     */</span>
<a name="l00938"></a><a class="code" href="class_boo___user.html#a827ebf98be7b972de0b745eaf7e77991">00938</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a827ebf98be7b972de0b745eaf7e77991" title="Authorize user.">auth</a>() {
<a name="l00939"></a>00939         <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> = $this-&gt;<a class="code" href="class_boo___user.html#a8370de49b20b86ddce6f521c8303d5bf" title="Gets the users ID.">getUserId</a>();
<a name="l00940"></a>00940         <span class="keywordflow">if</span> (!<a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a>) {
<a name="l00941"></a>00941             trigger_error(<span class="stringliteral">&apos;User ID cannot be zero&apos;</span>, E_USER_NOTICE);
<a name="l00942"></a>00942             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00943"></a>00943         }
<a name="l00944"></a>00944         
<a name="l00945"></a>00945         $_SESSION[<span class="stringliteral">&apos;boo_auth&apos;</span>] = <span class="keyword">true</span>;
<a name="l00946"></a>00946         $_SESSION[<span class="stringliteral">&apos;boo_user_id&apos;</span>] = <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a>;
<a name="l00947"></a>00947         $_SESSION[<span class="stringliteral">&apos;boo_user_id_hash&apos;</span>] = hash(<span class="stringliteral">&apos;sha256&apos;</span>, <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> . <a class="code" href="superglobal_8php.html#a097f4f45d006eb455da3780912a3f886" title="Returns a value from $_SERVER.">_server</a>(<span class="stringliteral">&apos;HTTP_USER_AGENT&apos;</span>) . BOO_SECRET);
<a name="l00948"></a>00948     
<a name="l00949"></a>00949         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00950"></a>00950     }
<a name="l00951"></a>00951     <span class="comment"></span>
<a name="l00952"></a>00952 <span class="comment">    /**</span>
<a name="l00953"></a>00953 <span class="comment">     * @brief Verifys a session hash to be sure the user ID was not changed without our knowning.</span>
<a name="l00954"></a>00954 <span class="comment">     * @return bool Returns TRUE if verified, FALSE otherwise.</span>
<a name="l00955"></a>00955 <span class="comment">     */</span>
<a name="l00956"></a><a class="code" href="class_boo___user.html#a089286062c61cd66886bb999d869d5d0">00956</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a089286062c61cd66886bb999d869d5d0" title="Verifys a session hash to be sure the user ID was not changed without our knowning...">verifyUserIdHash</a>() {
<a name="l00957"></a>00957         <span class="keywordflow">if</span> (isset($_SESSION[<span class="stringliteral">&apos;boo_user_id_hash&apos;</span>]) &amp;&amp; isset($_SESSION[<span class="stringliteral">&apos;boo_user_id&apos;</span>])) {
<a name="l00958"></a>00958             <span class="keywordflow">return</span> $_SESSION[<span class="stringliteral">&apos;boo_user_id_hash&apos;</span>] == hash(<span class="stringliteral">&apos;sha256&apos;</span>, $_SESSION[<span class="stringliteral">&apos;boo_user_id&apos;</span>]
<a name="l00959"></a>00959                 . <a class="code" href="superglobal_8php.html#a097f4f45d006eb455da3780912a3f886" title="Returns a value from $_SERVER.">_server</a>(<span class="stringliteral">&apos;HTTP_USER_AGENT&apos;</span>) . BOO_SECRET);
<a name="l00960"></a>00960         } <span class="keywordflow">else</span> {
<a name="l00961"></a>00961             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00962"></a>00962         }
<a name="l00963"></a>00963     }
<a name="l00964"></a>00964     <span class="comment"></span>
<a name="l00965"></a>00965 <span class="comment">    /**</span>
<a name="l00966"></a>00966 <span class="comment">     * @brief Determins if a session is authorized.</span>
<a name="l00967"></a>00967 <span class="comment">     * </span>
<a name="l00968"></a>00968 <span class="comment">     * @return bool Returns TRUE if authorized, FALSE otherwise.</span>
<a name="l00969"></a>00969 <span class="comment">     */</span>
<a name="l00970"></a><a class="code" href="class_boo___user.html#a03f404ed498e0fa6c53d5c2ae83fde41">00970</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a03f404ed498e0fa6c53d5c2ae83fde41" title="Determins if a session is authorized.">isAuth</a>() {
<a name="l00971"></a>00971         <span class="keywordflow">if</span> (isset($_SESSION[<span class="stringliteral">&apos;boo_auth&apos;</span>])) {
<a name="l00972"></a>00972             session_regenerate_id(<span class="keyword">true</span>);
<a name="l00973"></a>00973             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_boo___user.html#a089286062c61cd66886bb999d869d5d0" title="Verifys a session hash to be sure the user ID was not changed without our knowning...">verifyUserIdHash</a>();
<a name="l00974"></a>00974         }
<a name="l00975"></a>00975         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00976"></a>00976     }
<a name="l00977"></a>00977     <span class="comment"></span>
<a name="l00978"></a>00978 <span class="comment">    /**</span>
<a name="l00979"></a>00979 <span class="comment">     * @brief Login the user.</span>
<a name="l00980"></a>00980 <span class="comment">     * </span>
<a name="l00981"></a>00981 <span class="comment">     * @param string $username[optional] The username. If it is not set then Boo_User::getUsername() will be used.</span>
<a name="l00982"></a>00982 <span class="comment">     * @param string $password[optional] The password. If it is not set then Boo_User::getPassword() will be used.</span>
<a name="l00983"></a>00983 <span class="comment">     * </span>
<a name="l00984"></a>00984 <span class="comment">     * @return Returns TRUE if login was successful, FALSE otherwise.</span>
<a name="l00985"></a>00985 <span class="comment">     */</span>
<a name="l00986"></a><a class="code" href="class_boo___user.html#a773854aefafc4224587eab2fa2ebd38a">00986</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a773854aefafc4224587eab2fa2ebd38a" title="Login the user.">login</a>($username = <span class="keyword">false</span>, $password = <span class="keyword">false</span>) {
<a name="l00987"></a>00987         $passwordHash = <span class="stringliteral">&apos;&apos;</span>; $salt = <span class="stringliteral">&apos;&apos;</span>; <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> = 0;
<a name="l00988"></a>00988         
<a name="l00989"></a>00989         <span class="keywordflow">if</span> ($username === <span class="keyword">false</span>) {
<a name="l00990"></a>00990             $username = $this-&gt;<a class="code" href="class_boo___user.html#a99ea65a69f7b7beaf6a24c020c568af5">getUsername</a>();
<a name="l00991"></a>00991         } <span class="keywordflow">else</span> {
<a name="l00992"></a>00992             $username = strtolower(trim($username));
<a name="l00993"></a>00993         }
<a name="l00994"></a>00994         
<a name="l00995"></a>00995         <span class="keywordflow">if</span> ($password === <span class="keyword">false</span>) {
<a name="l00996"></a>00996             $password = $this-&gt;getPassword();
<a name="l00997"></a>00997         } <span class="keywordflow">else</span> {
<a name="l00998"></a>00998             $password = trim($password);
<a name="l00999"></a>00999         }
<a name="l01000"></a>01000         
<a name="l01001"></a>01001         $dbh = <a class="code" href="class_boo___db.html#a3a6db96c48448ee55608fddaef37c653" title="Connects to a database.">Boo_DB::connect</a>();
<a name="l01002"></a>01002         $stmt = $dbh-&gt;prepare(<span class="stringliteral">&quot;SELECT {$this-&gt;primaryKey}, username, password_hash, salt FROM {$this-&gt;tableName} WHERE username = :username LIMIT 1&quot;</span>);
<a name="l01003"></a>01003         
<a name="l01004"></a>01004         $stmt-&gt;bindParam(<span class="stringliteral">&apos;:username&apos;</span>, $username);
<a name="l01005"></a>01005         <span class="comment">// set user id</span>
<a name="l01006"></a>01006         $stmt-&gt;bindColumn($this-&gt;primaryKey, <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a>);
<a name="l01007"></a>01007         <span class="comment">// grab password_hash and salt</span>
<a name="l01008"></a>01008         $stmt-&gt;bindColumn(<span class="stringliteral">&apos;password_hash&apos;</span>, $passwordHash);
<a name="l01009"></a>01009         $stmt-&gt;bindColumn(<span class="stringliteral">&apos;salt&apos;</span>, $salt);
<a name="l01010"></a>01010         <span class="keywordflow">try</span> {
<a name="l01011"></a>01011             $stmt-&gt;execute();
<a name="l01012"></a>01012             $result = $stmt-&gt;fetch(PDO::FETCH_BOUND);
<a name="l01013"></a>01013             <span class="keywordflow">if</span> ($result) {
<a name="l01014"></a>01014                 <span class="comment">// user found check password </span>
<a name="l01015"></a>01015                 <span class="keywordflow">if</span> (hash(<span class="stringliteral">&apos;sha256&apos;</span>, $password . BOO_SECRET . $salt) == $passwordHash) {
<a name="l01016"></a>01016                     <span class="keywordflow">if</span>($this-&gt;<a class="code" href="class_boo___user.html#a6b51673d1edd83329a9295d7752b8a67">isStatusOK</a>()) {
<a name="l01017"></a>01017                         session_regenerate_id(<span class="keyword">true</span>);
<a name="l01018"></a>01018                         <span class="comment">// load user info</span>
<a name="l01019"></a>01019                         $this-&gt;<a class="code" href="class_boo___user.html#a499b83ce885480d6b8cb2fcfb7f9c9dd" title="Opens the user object.">open</a>(<a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a>);
<a name="l01020"></a>01020                         $this-&gt;<a class="code" href="class_boo___user.html#a827ebf98be7b972de0b745eaf7e77991" title="Authorize user.">auth</a>();
<a name="l01021"></a>01021                         $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;last_login&apos;</span>, time());
<a name="l01022"></a>01022                         $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;last_ip&apos;</span>, <a class="code" href="class_boo___io.html#ac6c562576ab2a8f97966e13490e04f58" title="Gets the IP for the object.">Boo_Page::getIp</a>());
<a name="l01023"></a>01023                         <span class="comment">// save last login and IP to database</span>
<a name="l01024"></a>01024                         $this-&gt;<a class="code" href="class_boo___io.html#a6e539e3bd8b70a503b6f02e81bfb4e12" title="Saves the fields to the database.">save</a>();
<a name="l01025"></a>01025                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01026"></a>01026                     } <span class="keywordflow">else</span> {
<a name="l01027"></a>01027                         <span class="comment">// account status is not valid</span>
<a name="l01028"></a>01028                         trigger_error(<span class="stringliteral">&quot;User {$userId} status is not OK, maybe your account is suspended&quot;</span>, E_USER_NOTICE);
<a name="l01029"></a>01029                         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01030"></a>01030                     }
<a name="l01031"></a>01031                 } <span class="keywordflow">else</span> {
<a name="l01032"></a>01032                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01033"></a>01033                 }
<a name="l01034"></a>01034             }
<a name="l01035"></a>01035         } <span class="keywordflow">catch</span> (Exception <a class="code" href="error-all_8php.html#ab74076a9b7e1d23d12b9e8d65e60315a">$e</a>) {
<a name="l01036"></a>01036             trigger_error($e-&gt;getMessage(), E_USER_ERROR);
<a name="l01037"></a>01037             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01038"></a>01038         }
<a name="l01039"></a>01039     }
<a name="l01040"></a>01040     <span class="comment"></span>
<a name="l01041"></a>01041 <span class="comment">    /**</span>
<a name="l01042"></a>01042 <span class="comment">     * @brief Logout user.</span>
<a name="l01043"></a>01043 <span class="comment">     * </span>
<a name="l01044"></a>01044 <span class="comment">     * @return bool Always returns TRUE.</span>
<a name="l01045"></a>01045 <span class="comment">     */</span>
<a name="l01046"></a><a class="code" href="class_boo___user.html#ae01925120a97d82b4c1d765d579ed71e">01046</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#ae01925120a97d82b4c1d765d579ed71e" title="Logout user.">logout</a>() {
<a name="l01047"></a>01047         $_SESSION[<span class="stringliteral">&apos;boo_auth&apos;</span>] = <span class="keyword">false</span>;
<a name="l01048"></a>01048         $_SESSION[<span class="stringliteral">&apos;boo_user_id&apos;</span>] = 0;
<a name="l01049"></a>01049         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01050"></a>01050     }
<a name="l01051"></a>01051     <span class="comment"></span>
<a name="l01052"></a>01052 <span class="comment">    /**</span>
<a name="l01053"></a>01053 <span class="comment">     * @breif Preform checks befor saving the user object.</span>
<a name="l01054"></a>01054 <span class="comment">     * </span>
<a name="l01055"></a>01055 <span class="comment">     * @return bool Returns TRUE on success, FALSE on failure.</span>
<a name="l01056"></a>01056 <span class="comment">     */</span>
<a name="l01057"></a><a class="code" href="class_boo___user.html#a6cebfe67b36ac7cf7ba3d450dd91f27a">01057</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a6cebfe67b36ac7cf7ba3d450dd91f27a">beforeSave</a>() {
<a name="l01058"></a>01058         
<a name="l01059"></a>01059         <span class="keywordflow">if</span> (!$this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;username&apos;</span>)) {
<a name="l01060"></a>01060             trigger_error(<span class="stringliteral">&apos;Username can not be null&apos;</span>, E_USER_WARNING);
<a name="l01061"></a>01061             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01062"></a>01062         }
<a name="l01063"></a>01063         
<a name="l01064"></a>01064         <span class="keywordflow">if</span> (!$this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;password_hash&apos;</span>)) {
<a name="l01065"></a>01065             trigger_error(<span class="stringliteral">&apos;Password hash can not be null&apos;</span>, E_USER_WARNING);
<a name="l01066"></a>01066             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01067"></a>01067         }
<a name="l01068"></a>01068         
<a name="l01069"></a>01069         <span class="keywordflow">if</span> (!$this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;salt&apos;</span>)) {
<a name="l01070"></a>01070             trigger_error(<span class="stringliteral">&apos;Salt can not be null&apos;</span>, E_USER_WARNING);
<a name="l01071"></a>01071             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01072"></a>01072         }
<a name="l01073"></a>01073         
<a name="l01074"></a>01074         <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="class_boo___io.html#ab37e14aa805df1b6dd777ed169f4d253" title="Gets the Boo ID.">getBooId</a>()) {
<a name="l01075"></a>01075             <span class="comment">// add new user</span>
<a name="l01076"></a>01076             $username = $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;username&apos;</span>);
<a name="l01077"></a>01077             <span class="keywordflow">if</span> (self::isUsername($username)) {
<a name="l01078"></a>01078                 trigger_error(<span class="stringliteral">&quot;Username {$username} is not unique&quot;</span>, E_USER_WARNING);
<a name="l01079"></a>01079                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01080"></a>01080             }
<a name="l01081"></a>01081         } <span class="keywordflow">else</span> {
<a name="l01082"></a>01082             <span class="comment">// save existing user</span>
<a name="l01083"></a>01083         }
<a name="l01084"></a>01084         
<a name="l01085"></a>01085         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01086"></a>01086     }
<a name="l01087"></a>01087     <span class="comment"></span>
<a name="l01088"></a>01088 <span class="comment">    /**</span>
<a name="l01089"></a>01089 <span class="comment">     * @brief Opens the user object.</span>
<a name="l01090"></a>01090 <span class="comment">     * </span>
<a name="l01091"></a>01091 <span class="comment">     * @param mixed $user The user to open. Accepts a user ID, email address, or username.</span>
<a name="l01092"></a>01092 <span class="comment">     * @return bool Returns TRUE on success, FALSE on failure.</span>
<a name="l01093"></a>01093 <span class="comment">     */</span>
<a name="l01094"></a><a class="code" href="class_boo___user.html#a499b83ce885480d6b8cb2fcfb7f9c9dd">01094</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a499b83ce885480d6b8cb2fcfb7f9c9dd" title="Opens the user object.">open</a>(<a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>) {
<a name="l01095"></a>01095         <a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = trim(<a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>);
<a name="l01096"></a>01096         
<a name="l01097"></a>01097         <span class="keywordflow">if</span> (ctype_digit(<a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>)) {
<a name="l01098"></a>01098             <span class="comment">// user ID</span>
<a name="l01099"></a>01099             <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> = <a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>;
<a name="l01100"></a>01100         } elseif (<a class="code" href="class_boo___validator.html#aa7236c4b2b732280174843978380861b" title="Determins if an email address is valid.">Boo_Validator::isEmail</a>(<a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>)) {
<a name="l01101"></a>01101             <span class="comment">// email address</span>
<a name="l01102"></a>01102             <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> = <a class="code" href="class_boo___user.html#a6eb47ff153076dc0424c4c598e412342" title="Gets a user ID given an email address.">self::getUserIdByEmail</a>(<a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>);
<a name="l01103"></a>01103         } <span class="keywordflow">else</span> {
<a name="l01104"></a>01104             <span class="comment">// username</span>
<a name="l01105"></a>01105             <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> = <a class="code" href="class_boo___user.html#a9af111bca84cac3d74f636b3e3ed7480" title="Gets a user ID given a username.">self::getUserIdByUsername</a>(<a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>);
<a name="l01106"></a>01106         }
<a name="l01107"></a>01107         
<a name="l01108"></a>01108         <span class="keywordflow">if</span> (<a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> === <span class="keyword">false</span>) {
<a name="l01109"></a>01109             trigger_error(<span class="stringliteral">&quot;User {$user} not found&quot;</span>, E_USER_WARNING);
<a name="l01110"></a>01110             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01111"></a>01111         }
<a name="l01112"></a>01112         
<a name="l01113"></a>01113         <span class="keywordflow">return</span> <a class="code" href="class_boo___user.html#a499b83ce885480d6b8cb2fcfb7f9c9dd" title="Opens the user object.">parent::open</a>(<a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a>);
<a name="l01114"></a>01114     }
<a name="l01115"></a>01115     
<a name="l01116"></a><a class="code" href="class_boo___user.html#a5d27fd1410fe491b5b38a46444d94544">01116</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a5d27fd1410fe491b5b38a46444d94544">openImages</a>(<a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> = <span class="keyword">false</span>) {
<a name="l01117"></a>01117         <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> = (int) <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a>;
<a name="l01118"></a>01118         
<a name="l01119"></a>01119         <span class="keywordflow">if</span> (!<a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a>) {
<a name="l01120"></a>01120             <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> = $this-&gt;<a class="code" href="class_boo___user.html#a8370de49b20b86ddce6f521c8303d5bf" title="Gets the users ID.">getUserId</a>();
<a name="l01121"></a>01121         }
<a name="l01122"></a>01122         
<a name="l01123"></a>01123         <span class="keywordflow">if</span> (!<a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a>) {
<a name="l01124"></a>01124             trigger_error(<span class="stringliteral">&apos;User ID can not be zero, try Boo_User::open() first&apos;</span>, E_USER_WARNING);
<a name="l01125"></a>01125             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01126"></a>01126         }
<a name="l01127"></a>01127         
<a name="l01128"></a>01128         <span class="keywordflow">return</span> $this-&gt;images-&gt;open(<a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a>);
<a name="l01129"></a>01129         
<a name="l01130"></a>01130     }
<a name="l01131"></a>01131     <span class="comment">// ##################################################################</span>
<a name="l01132"></a>01132     <span class="comment">// FIX SETINGS</span>
<a name="l01133"></a>01133     <span class="comment"></span>
<a name="l01134"></a>01134 <span class="comment">    /**</span>
<a name="l01135"></a>01135 <span class="comment">     * @brief Sets a user setting.</span>
<a name="l01136"></a>01136 <span class="comment">     * </span>
<a name="l01137"></a>01137 <span class="comment">     * @param string $name The setting name.</span>
<a name="l01138"></a>01138 <span class="comment">     * @param mixed $value The setting value.</span>
<a name="l01139"></a>01139 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l01140"></a>01140 <span class="comment">     * @todo Add support for more complex settings.</span>
<a name="l01141"></a>01141 <span class="comment">     */</span>
<a name="l01142"></a><a class="code" href="class_boo___user.html#addd484fd16db6f8d37aaf0856d9ee9e0">01142</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#addd484fd16db6f8d37aaf0856d9ee9e0" title="Sets a user setting.">setSetting</a>($name, $value) {
<a name="l01143"></a>01143         $name = trim($name);
<a name="l01144"></a>01144         <span class="keywordflow">if</span> (!preg_match(<span class="stringliteral">&apos;/(^[0-9A-Za-z]{1,16}$)/&apos;</span>, $name)) {
<a name="l01145"></a>01145             trigger_error(<span class="stringliteral">&quot;Name {$name} is not valid&quot;</span>, E_USER_WARNING);
<a name="l01146"></a>01146             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01147"></a>01147         }
<a name="l01148"></a>01148         <span class="comment">// allows false to work as a $value</span>
<a name="l01149"></a>01149         <span class="keywordflow">if</span> ($value &amp;&amp; !preg_match(<span class="stringliteral">&apos;/(^[0-9A-Za-z]{1,16}$)/&apos;</span>, $value)) {
<a name="l01150"></a>01150             trigger_error(<span class="stringliteral">&quot;Value {$value} is not valid&quot;</span>, E_USER_WARNING);
<a name="l01151"></a>01151             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01152"></a>01152         }
<a name="l01153"></a>01153         
<a name="l01154"></a>01154         $tmpSettings = $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;settings&apos;</span>);
<a name="l01155"></a>01155         $tmpSettings[$name] = $value;
<a name="l01156"></a>01156         
<a name="l01157"></a>01157         <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;settings&apos;</span>, $tmpSettings);
<a name="l01158"></a>01158     }
<a name="l01159"></a>01159     <span class="comment"></span>
<a name="l01160"></a>01160 <span class="comment">    /**</span>
<a name="l01161"></a>01161 <span class="comment">     * @brief Sets the users settings.</span>
<a name="l01162"></a>01162 <span class="comment">     * </span>
<a name="l01163"></a>01163 <span class="comment">     * @param array $settings The array of settings.</span>
<a name="l01164"></a>01164 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l01165"></a>01165 <span class="comment">     */</span>
<a name="l01166"></a><a class="code" href="class_boo___user.html#a5cf61c8df146f3503df214c470096172">01166</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a5cf61c8df146f3503df214c470096172" title="Sets the users settings.">setSettings</a>(array $settings) {
<a name="l01167"></a>01167         <span class="keywordflow">if</span> (empty($settings)) {
<a name="l01168"></a>01168             <span class="keywordflow">if</span> (<a class="code" href="example_8com_8php.html#a4c3b5336b2ae0662ff227ba6c34ab1dc" title="Debug mode.">BOO_DEBUG</a>) { trigger_error(<span class="stringliteral">&apos;Settings array is empty, using Boo_User::clearSettings() instead&apos;</span>, E_USER_NOTICE); }
<a name="l01169"></a>01169             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_boo___user.html#af8d172510a94baf60c4a0cb2a3b18273" title="Clears users settings.">clearSettings</a>();
<a name="l01170"></a>01170         }
<a name="l01171"></a>01171         
<a name="l01172"></a>01172         <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;settings&apos;</span>, $settings);
<a name="l01173"></a>01173     }
<a name="l01174"></a>01174     <span class="comment"></span>
<a name="l01175"></a>01175 <span class="comment">    /**</span>
<a name="l01176"></a>01176 <span class="comment">     * @brief Adds a user setting</span>
<a name="l01177"></a>01177 <span class="comment">     * </span>
<a name="l01178"></a>01178 <span class="comment">     * Provides API compatibility.</span>
<a name="l01179"></a>01179 <span class="comment">     * </span>
<a name="l01180"></a>01180 <span class="comment">     * @param string $name The setting name.</span>
<a name="l01181"></a>01181 <span class="comment">     * @param mixed $value The setting value.</span>
<a name="l01182"></a>01182 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l01183"></a>01183 <span class="comment">     */</span>
<a name="l01184"></a><a class="code" href="class_boo___user.html#a6eaaaae934029ba992d99059501784fc">01184</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a6eaaaae934029ba992d99059501784fc" title="Adds a user setting.">addSetting</a>($name, $value) {
<a name="l01185"></a>01185         $name = trim($name);
<a name="l01186"></a>01186         
<a name="l01187"></a>01187         $tmpSettings = $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;settings&apos;</span>);
<a name="l01188"></a>01188         $tmpSettings[$name] = $value;
<a name="l01189"></a>01189         
<a name="l01190"></a>01190         <span class="keywordflow">if</span> (array_key_exists($name, $tmpSettings)) {
<a name="l01191"></a>01191             rigger_error(<span class="stringliteral">&quot;Setting {$name} already exists, use Boo_User::setSetting() instead&quot;</span>, E_USER_WARNING);
<a name="l01192"></a>01192             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01193"></a>01193         } <span class="keywordflow">else</span> {
<a name="l01194"></a>01194             <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_boo___user.html#addd484fd16db6f8d37aaf0856d9ee9e0" title="Sets a user setting.">setSetting</a>($name, $value);
<a name="l01195"></a>01195         }
<a name="l01196"></a>01196         
<a name="l01197"></a>01197     }
<a name="l01198"></a>01198     <span class="comment"></span>
<a name="l01199"></a>01199 <span class="comment">    /**</span>
<a name="l01200"></a>01200 <span class="comment">     * @brief Adds settings to the users settings.</span>
<a name="l01201"></a>01201 <span class="comment">     * </span>
<a name="l01202"></a>01202 <span class="comment">     * @param array $settings The array of settings.</span>
<a name="l01203"></a>01203 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l01204"></a>01204 <span class="comment">     */</span>
<a name="l01205"></a><a class="code" href="class_boo___user.html#a704fa294a0744a3defacc0dbed513b8b">01205</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a704fa294a0744a3defacc0dbed513b8b" title="Adds settings to the users settings.">addSettings</a>(array $settings) {
<a name="l01206"></a>01206         <span class="keywordflow">if</span> (empty($settings)) {
<a name="l01207"></a>01207             trigger_error(<span class="stringliteral">&apos;Settings array is empty&apos;</span>, E_USER_NOTICE);
<a name="l01208"></a>01208             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01209"></a>01209         }
<a name="l01210"></a>01210         
<a name="l01211"></a>01211         $tmpSettings = $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;settings&apos;</span>);
<a name="l01212"></a>01212         
<a name="l01213"></a>01213         $tmpSettings = array_merge($tmpSettings, $settings);
<a name="l01214"></a>01214         <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;settings&apos;</span>, $settings);
<a name="l01215"></a>01215     }
<a name="l01216"></a>01216     <span class="comment"></span>
<a name="l01217"></a>01217 <span class="comment">    /**</span>
<a name="l01218"></a>01218 <span class="comment">     * @brief Determins if a user has a setting.</span>
<a name="l01219"></a>01219 <span class="comment">     * </span>
<a name="l01220"></a>01220 <span class="comment">     * @param string $key The setting key.</span>
<a name="l01221"></a>01221 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l01222"></a>01222 <span class="comment">     */</span>
<a name="l01223"></a><a class="code" href="class_boo___user.html#a68f2e7290034549c95eb5168c41938ec">01223</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a68f2e7290034549c95eb5168c41938ec" title="Determins if a user has a setting.">hasSetting</a>($key) {
<a name="l01224"></a>01224         $key = trim($key);
<a name="l01225"></a>01225         $tmpSettings = $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;settings&apos;</span>);
<a name="l01226"></a>01226         
<a name="l01227"></a>01227         <span class="keywordflow">return</span> array_key_exists($key, $tmpSettings);
<a name="l01228"></a>01228     }
<a name="l01229"></a>01229     <span class="comment"></span>
<a name="l01230"></a>01230 <span class="comment">    /**</span>
<a name="l01231"></a>01231 <span class="comment">     * @brief Clears users settings.</span>
<a name="l01232"></a>01232 <span class="comment">     * </span>
<a name="l01233"></a>01233 <span class="comment">     * @return bool Returns TRUE on success, FALSE on failure.</span>
<a name="l01234"></a>01234 <span class="comment">     */</span>
<a name="l01235"></a><a class="code" href="class_boo___user.html#af8d172510a94baf60c4a0cb2a3b18273">01235</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#af8d172510a94baf60c4a0cb2a3b18273" title="Clears users settings.">clearSettings</a>() {
<a name="l01236"></a>01236         <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;settings&apos;</span>, array());
<a name="l01237"></a>01237     }
<a name="l01238"></a>01238     <span class="comment"></span>
<a name="l01239"></a>01239 <span class="comment">    /**</span>
<a name="l01240"></a>01240 <span class="comment">     * @brief Removes a users settings.</span>
<a name="l01241"></a>01241 <span class="comment">     * </span>
<a name="l01242"></a>01242 <span class="comment">     * @param string $name The name of the setting.</span>
<a name="l01243"></a>01243 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l01244"></a>01244 <span class="comment">     */</span>
<a name="l01245"></a><a class="code" href="class_boo___user.html#a05c84c649b2b040999525ebb44ec8d78">01245</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a05c84c649b2b040999525ebb44ec8d78" title="Removes a users settings.">removeSetting</a>($name) {
<a name="l01246"></a>01246         $name = trim($name);
<a name="l01247"></a>01247         $tmpSettings = $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;settings&apos;</span>);
<a name="l01248"></a>01248         
<a name="l01249"></a>01249         <span class="keywordflow">if</span> (array_key_exists($name, $tmpSettings)) {
<a name="l01250"></a>01250             unset($tmpSettings[$name]);
<a name="l01251"></a>01251             <span class="keywordflow">return</span> $this-&gt;<span class="keyword">set</span>(<span class="stringliteral">&apos;settings&apos;</span>, $tmpSettings);
<a name="l01252"></a>01252         } <span class="keywordflow">else</span> {
<a name="l01253"></a>01253             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01254"></a>01254         }
<a name="l01255"></a>01255     }
<a name="l01256"></a>01256     <span class="comment"></span>
<a name="l01257"></a>01257 <span class="comment">    /**</span>
<a name="l01258"></a>01258 <span class="comment">     * @brief Gets a user setting.</span>
<a name="l01259"></a>01259 <span class="comment">     * </span>
<a name="l01260"></a>01260 <span class="comment">     * @param string $name The name of the setting.</span>
<a name="l01261"></a>01261 <span class="comment">     * @return mixed Returns setting on success, FALSE on failure.</span>
<a name="l01262"></a>01262 <span class="comment">     */</span>
<a name="l01263"></a><a class="code" href="class_boo___user.html#a30ff7facc868b91b5350e101ae24fdf0">01263</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a30ff7facc868b91b5350e101ae24fdf0" title="Gets a user setting.">getSetting</a>($name) {
<a name="l01264"></a>01264         $name = trim($name);
<a name="l01265"></a>01265         $tmpSettings = $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;settings&apos;</span>);
<a name="l01266"></a>01266         
<a name="l01267"></a>01267         <span class="keywordflow">if</span> (array_key_exists($name, $tmpSettings)) {
<a name="l01268"></a>01268             <span class="keywordflow">return</span> $tmpSettings[$name];
<a name="l01269"></a>01269         } <span class="keywordflow">else</span> {
<a name="l01270"></a>01270             trigger_error(<span class="stringliteral">&quot;Setting {$name} was not found&quot;</span>, E_USER_NOTICE);
<a name="l01271"></a>01271             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01272"></a>01272         }
<a name="l01273"></a>01273     }
<a name="l01274"></a>01274         <span class="comment"></span>
<a name="l01275"></a>01275 <span class="comment">    /**</span>
<a name="l01276"></a>01276 <span class="comment">     * @brief Gets array of users settings.</span>
<a name="l01277"></a>01277 <span class="comment">     * @return array Returns array of users settings, FALSE on failure.</span>
<a name="l01278"></a>01278 <span class="comment">     */</span>
<a name="l01279"></a><a class="code" href="class_boo___user.html#ac21f2f6ba3fc80c9e2379682e1104296">01279</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#ac21f2f6ba3fc80c9e2379682e1104296" title="Gets array of users settings.">getSettings</a>() { <span class="keywordflow">return</span> $this-&gt;<span class="keyword">get</span>(<span class="stringliteral">&apos;settings&apos;</span>); }
<a name="l01280"></a>01280     
<a name="l01281"></a>01281     <span class="comment"></span>
<a name="l01282"></a>01282 <span class="comment">    /**</span>
<a name="l01283"></a>01283 <span class="comment">     * @brief Determines if a username already exists.</span>
<a name="l01284"></a>01284 <span class="comment">     * </span>
<a name="l01285"></a>01285 <span class="comment">     * @param string $username The username.</span>
<a name="l01286"></a>01286 <span class="comment">     * @return bool Returns TRUE if username is already in the database, FALSE otherwise.</span>
<a name="l01287"></a>01287 <span class="comment">     */</span>
<a name="l01288"></a><a class="code" href="class_boo___user.html#ae22940669cedd44d7f047e454c212bf9">01288</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_boo___user.html#ae22940669cedd44d7f047e454c212bf9" title="Determines if a username already exists.">isUsername</a>($username) {
<a name="l01289"></a>01289         $username = strtolower(trim($username));
<a name="l01290"></a>01290         <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) <a class="code" href="class_boo___user.html#adabfd877f662fa04c0335a1ef1b5f75a" title="Determins if an item exists in a given column.">self::exists</a>($username, <span class="stringliteral">&apos;username&apos;</span>);
<a name="l01291"></a>01291     }
<a name="l01292"></a>01292     <span class="comment"></span>
<a name="l01293"></a>01293 <span class="comment">    /**</span>
<a name="l01294"></a>01294 <span class="comment">     * @brief Determines if an email address already exists.</span>
<a name="l01295"></a>01295 <span class="comment">     * </span>
<a name="l01296"></a>01296 <span class="comment">     * @param string $email The email address.</span>
<a name="l01297"></a>01297 <span class="comment">     * @return bool Returns TRUE if email address is already in the database, FALSE otherwise.</span>
<a name="l01298"></a>01298 <span class="comment">     */</span>
<a name="l01299"></a><a class="code" href="class_boo___user.html#a13d5033afe0d6daa3a3d4c50549f1475">01299</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_boo___user.html#a13d5033afe0d6daa3a3d4c50549f1475" title="Determines if an email address already exists.">isEmail</a>($email) {
<a name="l01300"></a>01300         $email = trim($email);
<a name="l01301"></a>01301         <span class="keywordflow">return</span> (<span class="keywordtype">bool</span>) <a class="code" href="class_boo___user.html#adabfd877f662fa04c0335a1ef1b5f75a" title="Determins if an item exists in a given column.">self::exists</a>($email, <span class="stringliteral">&apos;email&apos;</span>);
<a name="l01302"></a>01302     }
<a name="l01303"></a>01303     <span class="comment"></span>
<a name="l01304"></a>01304 <span class="comment">    /**</span>
<a name="l01305"></a>01305 <span class="comment">     * @brief Determins if a user already exists.</span>
<a name="l01306"></a>01306 <span class="comment">     * @param mixed $user The user to open. Accepts a user ID, email address, or username.</span>
<a name="l01307"></a>01307 <span class="comment">     * @return bool Returns TRUE on success, FALSE on failure.</span>
<a name="l01308"></a>01308 <span class="comment">     */</span>
<a name="l01309"></a>01309         
<a name="l01310"></a><a class="code" href="class_boo___user.html#a0afc500a9dd6f36ee7d109b5dd2c0504">01310</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_boo___user.html#a0afc500a9dd6f36ee7d109b5dd2c0504" title="Determins if a user already exists.">isUser</a>(<a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>) {
<a name="l01311"></a>01311         <a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = trim(<a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>);
<a name="l01312"></a>01312         
<a name="l01313"></a>01313         <span class="keywordflow">if</span> (ctype_digit(<a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>)) {
<a name="l01314"></a>01314             <span class="comment">// user ID</span>
<a name="l01315"></a>01315             <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> = <a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>;
<a name="l01316"></a>01316         } elseif (<a class="code" href="class_boo___validator.html#aa7236c4b2b732280174843978380861b" title="Determins if an email address is valid.">Boo_Validator::isEmail</a>(<a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>)) {
<a name="l01317"></a>01317             <span class="comment">// email address</span>
<a name="l01318"></a>01318             <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> = <a class="code" href="class_boo___user.html#a6eb47ff153076dc0424c4c598e412342" title="Gets a user ID given an email address.">self::getUserIdByEmail</a>(<a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>);
<a name="l01319"></a>01319         } <span class="keywordflow">else</span> {
<a name="l01320"></a>01320             <span class="comment">// username</span>
<a name="l01321"></a>01321             <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> = <a class="code" href="class_boo___user.html#a9af111bca84cac3d74f636b3e3ed7480" title="Gets a user ID given a username.">self::getUserIdByUsername</a>(<a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>);
<a name="l01322"></a>01322         }
<a name="l01323"></a>01323         
<a name="l01324"></a>01324         <span class="keywordflow">return</span> !<a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> === <span class="keyword">false</span>;
<a name="l01325"></a>01325     }<span class="comment"></span>
<a name="l01326"></a>01326 <span class="comment">    /**</span>
<a name="l01327"></a>01327 <span class="comment">     * @brief Determines if a user ID already exists.</span>
<a name="l01328"></a>01328 <span class="comment">     * </span>
<a name="l01329"></a>01329 <span class="comment">     * @param int $userId The user ID.</span>
<a name="l01330"></a>01330 <span class="comment">     * @return bool Returns TRUE if user ID is already in the database, FALSE otherwise.</span>
<a name="l01331"></a>01331 <span class="comment">     */</span>
<a name="l01332"></a><a class="code" href="class_boo___user.html#af8727edc345c3c95fba58f4b911adb71">01332</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_boo___user.html#af8727edc345c3c95fba58f4b911adb71" title="Determines if a user ID already exists.">isUserId</a>(<a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a>) {
<a name="l01333"></a>01333         <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> = (int) <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a>;
<a name="l01334"></a>01334         <span class="comment">// allows for a user ID of 0</span>
<a name="l01335"></a>01335         <span class="keywordflow">return</span> !(<a class="code" href="class_boo___user.html#adabfd877f662fa04c0335a1ef1b5f75a" title="Determins if an item exists in a given column.">self::exists</a>($name, <span class="stringliteral">&apos;name&apos;</span>, self::TABLE_NAME, self::PRIMARY_KEY) === <span class="keyword">false</span>);
<a name="l01336"></a>01336     }
<a name="l01337"></a>01337     <span class="comment"></span>
<a name="l01338"></a>01338 <span class="comment">    /**</span>
<a name="l01339"></a>01339 <span class="comment">     * @brief Gets a field given an ID.</span>
<a name="l01340"></a>01340 <span class="comment">     * </span>
<a name="l01341"></a>01341 <span class="comment">     * @param string $field The field</span>
<a name="l01342"></a>01342 <span class="comment">     * @param int $userId The user ID.</span>
<a name="l01343"></a>01343 <span class="comment">     * @return mixed Returns the value of the field if successful, FALSE otherwise.</span>
<a name="l01344"></a>01344 <span class="comment">     */</span>
<a name="l01345"></a><a class="code" href="class_boo___user.html#a3744c20091e99c3de18ce2f025ed1e6b">01345</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_boo___user.html#a3744c20091e99c3de18ce2f025ed1e6b" title="Gets a field given an ID.">getFieldByUserId</a>($field, <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a>) {
<a name="l01346"></a>01346         $field = trim($field);
<a name="l01347"></a>01347         <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> = (int) <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a>;
<a name="l01348"></a>01348         
<a name="l01349"></a>01349         
<a name="l01350"></a>01350         <span class="keywordflow">if</span> (class_exists(<span class="stringliteral">&apos;User&apos;</span>, <span class="keyword">false</span>) &amp;&amp; BOO_CLASS) {
<a name="l01351"></a>01351             <a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = <span class="keyword">new</span> User;
<a name="l01352"></a>01352         } <span class="keywordflow">else</span> {
<a name="l01353"></a>01353             <a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a> = <span class="keyword">new</span> <a class="code" href="class_boo___user.html" title="User class.">Boo_User</a>;
<a name="l01354"></a>01354         }
<a name="l01355"></a>01355         
<a name="l01356"></a>01356         <span class="keywordflow">if</span> (<a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;open(<a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a>)) {
<a name="l01357"></a>01357             <span class="keywordflow">return</span> <a class="code" href="add-user_8php.html#a598ca4e71b15a1313ec95f0df1027ca5">$user</a>-&gt;get($field);
<a name="l01358"></a>01358         } <span class="keywordflow">else</span> {
<a name="l01359"></a>01359             trigger_error(<span class="stringliteral">&quot;Opening user {$userId} failed, can not continue&quot;</span>, E_USER_WARNING);
<a name="l01360"></a>01360             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01361"></a>01361         }
<a name="l01362"></a>01362     }
<a name="l01363"></a>01363     <span class="comment"></span>
<a name="l01364"></a>01364 <span class="comment">    /**</span>
<a name="l01365"></a>01365 <span class="comment">     * @brief Determins if an item exists in a given column.</span>
<a name="l01366"></a>01366 <span class="comment">     * </span>
<a name="l01367"></a>01367 <span class="comment">     * Shortcut function for Boo_User.</span>
<a name="l01368"></a>01368 <span class="comment">     * </span>
<a name="l01369"></a>01369 <span class="comment">     * @param string $search The search string.</span>
<a name="l01370"></a>01370 <span class="comment">     * @param string $column The column name.</span>
<a name="l01371"></a>01371 <span class="comment">     * @param string $tableName[optional] The table name.</span>
<a name="l01372"></a>01372 <span class="comment">     * @param mixed $primaryKey[optional] The primary key for the table, should be a Boo ID.</span>
<a name="l01373"></a>01373 <span class="comment">     * @return mixed Returns Boo ID on success, FALSE on failure.</span>
<a name="l01374"></a>01374 <span class="comment">     */</span>
<a name="l01375"></a><a class="code" href="class_boo___user.html#adabfd877f662fa04c0335a1ef1b5f75a">01375</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_boo___user.html#adabfd877f662fa04c0335a1ef1b5f75a" title="Determins if an item exists in a given column.">exists</a>($search, $column, <a class="code" href="class_boo___db.html#ab929ae651e901f6c85a15a47f8f82b49" title="The table name.">$tableName</a> = self::TABLE_NAME, <a class="code" href="class_boo___db.html#a641baac3e272fb1f76e0b4aa157f293f" title="The name of the tables primary key.">$primaryKey</a> = self::PRIMARY_KEY) {
<a name="l01376"></a>01376         <span class="keywordflow">return</span> <a class="code" href="class_boo___user.html#adabfd877f662fa04c0335a1ef1b5f75a" title="Determins if an item exists in a given column.">parent::exists</a>($search, $column, <a class="code" href="class_boo___db.html#ab929ae651e901f6c85a15a47f8f82b49" title="The table name.">$tableName</a>, <a class="code" href="class_boo___db.html#a641baac3e272fb1f76e0b4aa157f293f" title="The name of the tables primary key.">$primaryKey</a>);
<a name="l01377"></a>01377     }
<a name="l01378"></a>01378     <span class="comment"></span>
<a name="l01379"></a>01379 <span class="comment">    /**</span>
<a name="l01380"></a>01380 <span class="comment">     * @brief Gets a user ID given a username.</span>
<a name="l01381"></a>01381 <span class="comment">     * </span>
<a name="l01382"></a>01382 <span class="comment">     * @param string $username The username.</span>
<a name="l01383"></a>01383 <span class="comment">     * @return int Returns the user ID if successful, FALSE otherwise.</span>
<a name="l01384"></a>01384 <span class="comment">     */</span>
<a name="l01385"></a><a class="code" href="class_boo___user.html#a9af111bca84cac3d74f636b3e3ed7480">01385</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_boo___user.html#a9af111bca84cac3d74f636b3e3ed7480" title="Gets a user ID given a username.">getUserIdByUsername</a>($username) {
<a name="l01386"></a>01386         $username = strtolower(trim($username));
<a name="l01387"></a>01387         <span class="keywordflow">return</span> <a class="code" href="class_boo___user.html#adabfd877f662fa04c0335a1ef1b5f75a" title="Determins if an item exists in a given column.">self::exists</a>($username, <span class="stringliteral">&apos;username&apos;</span>);
<a name="l01388"></a>01388     }
<a name="l01389"></a>01389     <span class="comment"></span>
<a name="l01390"></a>01390 <span class="comment">    /**</span>
<a name="l01391"></a>01391 <span class="comment">     * @brief Gets a user ID given an email address.</span>
<a name="l01392"></a>01392 <span class="comment">     * </span>
<a name="l01393"></a>01393 <span class="comment">     * @param string $email The email address.</span>
<a name="l01394"></a>01394 <span class="comment">     * @return int Returns the user ID if successful, FALSE otherwise.</span>
<a name="l01395"></a>01395 <span class="comment">     */</span>
<a name="l01396"></a><a class="code" href="class_boo___user.html#a6eb47ff153076dc0424c4c598e412342">01396</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_boo___user.html#a6eb47ff153076dc0424c4c598e412342" title="Gets a user ID given an email address.">getUserIdByEmail</a>($email) {
<a name="l01397"></a>01397         $email = strtolower(trim($email));
<a name="l01398"></a>01398         <span class="keywordflow">return</span> <a class="code" href="class_boo___user.html#adabfd877f662fa04c0335a1ef1b5f75a" title="Determins if an item exists in a given column.">self::exists</a>($email, <span class="stringliteral">&apos;email&apos;</span>);
<a name="l01399"></a>01399     }
<a name="l01400"></a>01400     <span class="comment"></span>
<a name="l01401"></a>01401 <span class="comment">    /**</span>
<a name="l01402"></a>01402 <span class="comment">     * @brief Gets the current user ID from the session.</span>
<a name="l01403"></a>01403 <span class="comment">     * </span>
<a name="l01404"></a>01404 <span class="comment">     * @return int Returns user ID on success, FALSE otherwise.</span>
<a name="l01405"></a>01405 <span class="comment">     */</span>
<a name="l01406"></a><a class="code" href="class_boo___user.html#a51db02c10c92c69134903346703893a2">01406</a>     <span class="keyword">public</span> <span class="keyword">static</span> function <a class="code" href="class_boo___user.html#a51db02c10c92c69134903346703893a2" title="Gets the current user ID from the session.">getSessionUserId</a>() {
<a name="l01407"></a>01407         <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a> = ((isset($_SESSION[<span class="stringliteral">&apos;boo_user_id&apos;</span>])) ? $_SESSION[<span class="stringliteral">&apos;boo_user_id&apos;</span>] : <span class="keyword">false</span>);
<a name="l01408"></a>01408         <span class="keywordflow">return</span> <a class="code" href="add-user_8php.html#a84651f4070d04080f6c5fd3c98cc9104">$userId</a>;
<a name="l01409"></a>01409     }
<a name="l01410"></a>01410     
<a name="l01411"></a>01411     <span class="comment"></span>
<a name="l01412"></a>01412 <span class="comment">    /**</span>
<a name="l01413"></a>01413 <span class="comment">     * @brief Determins if a user has a full address.</span>
<a name="l01414"></a>01414 <span class="comment">     * </span>
<a name="l01415"></a>01415 <span class="comment">     * @return bool Returns TRUE on success, FALSE otherwise.</span>
<a name="l01416"></a>01416 <span class="comment">     */</span>
<a name="l01417"></a><a class="code" href="class_boo___user.html#adf204c227d7641611097952368a620d5">01417</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#adf204c227d7641611097952368a620d5" title="Determins if a user has a full address.">hasAddress</a>() {
<a name="l01418"></a>01418         $result = $this-&gt;<a class="code" href="class_boo___user.html#ad8c0699621dcb97a0505716ea96dbc1f" title="Gets the users street.">getStreet</a>() &amp;&amp; $this-&gt;<a class="code" href="class_boo___user.html#a00957a1af85c4f6013305b648412d805" title="Gets the users city.">getCity</a>() &amp;&amp; $this-&gt;<a class="code" href="class_boo___user.html#aa32af50b17e0fae5226dd44b311c8426" title="Gets the users state code.">getStateCode</a>() &amp;&amp; $this-&gt;<a class="code" href="class_boo___user.html#af5535d6fc9a35c212057644c85bde3ac" title="Gets the users ZIP code.">getZip</a>() &amp;&amp; $this-&gt;<a class="code" href="class_boo___user.html#a4aeab11f38667a3367fd0c9170971b44" title="Gets the users country name.">getCountryName</a>();
<a name="l01419"></a>01419         <span class="keywordflow">return</span> $result;
<a name="l01420"></a>01420     }
<a name="l01421"></a>01421     <span class="comment"></span>
<a name="l01422"></a>01422 <span class="comment">    /**</span>
<a name="l01423"></a>01423 <span class="comment">     * @brief Returns address as html.</span>
<a name="l01424"></a>01424 <span class="comment">     * </span>
<a name="l01425"></a>01425 <span class="comment">     * Uses &lt;span class=&quot;address&quot;&gt; tags.</span>
<a name="l01426"></a>01426 <span class="comment">     * @param array $attrs[optional] Array of attributes.</span>
<a name="l01427"></a>01427 <span class="comment">     * @return string Address as html.</span>
<a name="l01428"></a>01428 <span class="comment">     */</span>
<a name="l01429"></a><a class="code" href="class_boo___user.html#ac798a66e292cb5dc78db23132bd11217">01429</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#ac798a66e292cb5dc78db23132bd11217" title="Returns address as html.">htmlAddressSpan</a>(array $attrs = array()) {
<a name="l01430"></a>01430         $tmp = <span class="stringliteral">&apos;&apos;</span>;
<a name="l01431"></a>01431         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_boo___user.html#ac1537e5aaea442a1b0956f87e9923cf3" title="Gets the users name.">getName</a>()) {
<a name="l01432"></a>01432             $tmp .= ucwords($this-&gt;<a class="code" href="class_boo___user.html#ac1537e5aaea442a1b0956f87e9923cf3" title="Gets the users name.">getName</a>()) . <span class="stringliteral">&apos;&lt;br /&gt;&apos;</span>;
<a name="l01433"></a>01433         }
<a name="l01434"></a>01434         
<a name="l01435"></a>01435         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_boo___user.html#ad8c0699621dcb97a0505716ea96dbc1f" title="Gets the users street.">getStreet</a>()) {
<a name="l01436"></a>01436             <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_boo___user.html#a5af348305e84921fcb7055a4e3a2905a" title="Determins if user has an apartment number.">hasApartmentNumber</a>()) { <span class="comment">// zero is a valid apartment number</span>
<a name="l01437"></a>01437                 $tmp .= ucwords($this-&gt;<a class="code" href="class_boo___user.html#ad8c0699621dcb97a0505716ea96dbc1f" title="Gets the users street.">getStreet</a>()) . <span class="stringliteral">&apos; #&apos;</span> . $this-&gt;<a class="code" href="class_boo___user.html#a4221e62d4fe256e8468a809e0e27a358" title="Gets the users apartment number.">getApartmentNumber</a>() .<span class="stringliteral">&apos;&lt;br /&gt;&apos;</span>;
<a name="l01438"></a>01438             } <span class="keywordflow">else</span> {
<a name="l01439"></a>01439                 $tmp .= ucwords($this-&gt;<a class="code" href="class_boo___user.html#ad8c0699621dcb97a0505716ea96dbc1f" title="Gets the users street.">getStreet</a>()) . <span class="stringliteral">&apos;&lt;br /&gt;&apos;</span>;
<a name="l01440"></a>01440             }
<a name="l01441"></a>01441         }
<a name="l01442"></a>01442         
<a name="l01443"></a>01443         $tmp .= ucwords($this-&gt;<a class="code" href="class_boo___user.html#a00957a1af85c4f6013305b648412d805" title="Gets the users city.">getCity</a>()) . <span class="stringliteral">&apos;, &apos;</span> . $this-&gt;<a class="code" href="class_boo___user.html#aa32af50b17e0fae5226dd44b311c8426" title="Gets the users state code.">getStateCode</a>() . <span class="charliteral">&apos; &apos;</span> . $this-&gt;<a class="code" href="class_boo___user.html#af5535d6fc9a35c212057644c85bde3ac" title="Gets the users ZIP code.">getZip</a>(). <span class="stringliteral">&apos;&lt;br /&gt;&apos;</span>;
<a name="l01444"></a>01444         $tmp .= $this-&gt;<a class="code" href="class_boo___user.html#a4aeab11f38667a3367fd0c9170971b44" title="Gets the users country name.">getCountryName</a>();
<a name="l01445"></a>01445         
<a name="l01446"></a>01446         $span = <span class="keyword">new</span> <a class="code" href="class_boo___html___span.html" title="HTML span class.">Boo_Html_Span</a>;
<a name="l01447"></a>01447         $span-&gt;applyAttrs($attrs);
<a name="l01448"></a>01448         $span-&gt;addClass(<span class="stringliteral">&apos;address&apos;</span>);
<a name="l01449"></a>01449         $span-&gt;setContent($tmp);
<a name="l01450"></a>01450         <span class="keywordflow">return</span> $span;
<a name="l01451"></a>01451     }
<a name="l01452"></a>01452     <span class="comment"></span>
<a name="l01453"></a>01453 <span class="comment">    /**</span>
<a name="l01454"></a>01454 <span class="comment">     * @brief Determins if user is a member of the root group.</span>
<a name="l01455"></a>01455 <span class="comment">     * </span>
<a name="l01456"></a>01456 <span class="comment">     * @return bool Returns TRUE if user is a member of the root group, FALSE otherwise.</span>
<a name="l01457"></a>01457 <span class="comment">     */</span>
<a name="l01458"></a><a class="code" href="class_boo___user.html#a97b4ea582b1b6cc8afd691f860b40781">01458</a>     <span class="keyword">public</span> function <a class="code" href="class_boo___user.html#a97b4ea582b1b6cc8afd691f860b40781" title="Determins if user is a member of the root group.">isRoot</a>() {
<a name="l01459"></a>01459         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="class_boo___user.html#ab7b2b90d422ae4c362f7a5f22750e38e" title="Gets the users group ID.">getGroupId</a>() == BOO_GROUP_ROOT) {
<a name="l01460"></a>01460             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01461"></a>01461         } <span class="keywordflow">else</span> {
<a name="l01462"></a>01462             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01463"></a>01463         }
<a name="l01464"></a>01464     }
<a name="l01465"></a>01465     
<a name="l01466"></a>01466 }
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/>
<p style="text-align: center;">API Documentation for Boo-2.0.x is licensed under the <a rel="license" href="http://www.gnu.org/licenses/gpl-3.0.txt">GNU General Public License</a>.</p>
<p style="text-align: center;"><small>Generated on Wed Dec 9 17:42:39 2009 by <a href="http://www.doxygen.org/">Doxygen</a> 1.6.1</small>.</p>
</body>
</html>
